<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>JavaScript disabled</title><script>(function(){document.title="Loading",window.__titleAnimation__=window.setInterval(function(){document.title.length<10?document.title+=".":document.title="Loading"},500)})();</script>
<script>(function(){var a=function(){var a=document.createElement("canvas"),b=typeof Object.defineProperties=="function",c=typeof Object.freeze=="function",d=typeof a.getContext=="function",e=!1;try{a.getContext("2d"),e=!0}catch(f){}return b&&d&&e}();a?(document.write([
"<script>",'(function(){"use strict";var a={};a.help={},a.help.data=[],a.internal={},a.game={},a.collections={},a.graphics={},a.input={},a.math={},a.music={},a.sound={},a.string={},a.types={},Object.defineProperty(window,"gamework",{value:a,enumerable:!0})})(),function(a){a.validateId=function(a){return typeof a!="string"?"":(a=a.trim().split(/\\s+/).join("_"),a.match(/^[a-zA-Z_$][0-9a-zA-Z-_$]*$/)?a:"")}}(gamework.internal),function(a){"use strict",a.install=function(a){a.gettype=function(a){var b=typeof a;if(b==="object"){if(!a)return"null";if(Object.prototype.toString.call(a)==="[object Array]")return"array"}return b},a.isarray=function(a){return gamework.types.gettype(a)==="array"},a.isboolean=function(a){return gamework.types.gettype(a)==="boolean"},a.isfunction=function(a){return gamework.types.gettype(a)==="function"},a.isnull=function(a){return gamework.types.gettype(a)==="null"},a.isnumber=function(a){return gamework.types.gettype(a)==="number"},a.isobject=function(a){return gamework.types.gettype(a)==="object"},a'
,'.isstring=function(a){return gamework.types.gettype(a)==="string"},a.isundefined=function(a){return gamework.types.gettype(a)==="undefined"}},a.install(a)}(gamework.types),function(a){"use strict",a.install=function(a){a.charcode=function(a){return a.charCodeAt(0)},a["char"]=function(a){return String.fromCharCode(a)},a.tobinstring=function(a){return(+a).toString(2)},a.tooctstring=function(a){return(+a).toString(8)},a.tohexstring=function(a){return(+a).toString(16)},a.frombinstring=function(a){return parseInt(a,2)},a.fromoctstring=function(a){return parseInt(a,8)},a.fromhexstring=function(a){return parseInt(a,16)}},a.install(a)}(gamework.string),function(a){"use strict",a.install=function(a){a.foreach=function(a,b){var c,d,e=gamework.types.gettype(b);if(e==="string"||e==="array")for(d=0;d<b.length;d+=1)a(b[d],d,b);else if(e==="object")for(c in b)b.hasOwnProperty(c)&&a(b[c],c,b)},a.map=function(a,b){var c,d,e,f=gamework.types.gettype(b);if(f==="string"){c="";for(e=0;e<b.length;e+=1)c+=a(b[e],e,b).toString()}else if('
,'f==="array"){c=[];for(e=0;e<b.length;e+=1)c.push(a(b[e],e,b))}else if(f==="object"){c={};for(d in b)b.hasOwnProperty(d)&&(c[d]=a(b[d],d,b))}return c},a.reduce=function(a,b,c){var d,e,f=gamework.types.gettype(c);if(f==="string"||f==="array")for(e=0;e<c.length;e+=1)b=a(b,c[e],e,c);else if(f==="object")for(d in c)c.hasOwnProperty(d)&&(b=a(b,c[d],d,c));return b},a.filter=function(a,b){var c,d,e,f=gamework.types.gettype(b);if(f==="string"){c="";for(e=0;e<b.length;e+=1)a(b[e])&&(c+=b[e])}else if(f==="array"){c=[];for(e=0;e<b.length;e+=1)a(b[e])&&c.push(b[e])}else if(f==="object"){c={};for(d in b)b.hasOwnProperty(d)&&a(b[d])&&(c[d]=b[d])}return c},a.makearray=function(){function d(a,b,c){var e,f=[];if(b.length==1)for(e=0;e<b[0];e+=1)f.push(a.apply(this,c.concat([e])));else if(b.length>1)for(e=0;e<b[0];e+=1)f.push(d(a,b.slice(1),c.slice(1).concat([e])));return f}var a,b=Array.prototype.slice.call(arguments,1),c=[];if(arguments.length>=2){for(a=0;a<b.length-1;a+=1)c.push(0);return d(arguments[0],b,c)}},a.makezeroarray='
,'function(){function b(){return 0}var a=Array.prototype.slice.call(arguments);return gamework.collections.makearray.apply(this,[b].concat(a))},a.makenullarray=function(){function b(){return null}var a=Array.prototype.slice.call(arguments);return gamework.collections.makearray.apply(this,[b].concat(a))},a.len=function(a){var b=gamework.types.gettype(a);if(b==="string"||b==="array")return a.length;if(b==="object")return gamework.collections.reduce(function(a){return a+1},0,a)},a.keys=function(a){var b,c=gamework.types.gettype(a),d=[];if(c==="array"||c==="string")return gamework.collections.makearray(gamework.math.identity,a.length);if(c==="object")for(b in a)a.hasOwnProperty(b)&&d.push(b);return d},a.values=function(a){var b,c=gamework.types.gettype(a),d=[];if(c==="array"||c==="string")return a.slice();if(c==="object")for(b in a)a.hasOwnProperty(b)&&d.push(a[b]);return d},a.isempty=function(a){return gamework.collections.len(a)===0},a.haskey=function(a,b){return gamework.collections.keys(a).indexOf(b)!==-1},a.contains='
,'function(a,b){return gamework.collections.values(a).indexOf(b)!==-1}},a.install(a)}(gamework.collections),function(a){function Vector(a,b){this.x=a,this.y=b,Object.freeze(this)}"use strict";var b=1,c=Math.PI/180,d=Math.PI*2,e="deg",f=c;Vector.prototype.toString=function(){return"vector("+this.x+", "+this.y+")"},Vector.prototype.add=function(a){return new Vector(this.x+a.x,this.y+a.y)},Vector.prototype.sub=function(a){return new Vector(this.x-a.x,this.y-a.y)},Vector.prototype.mul=function(a){return new Vector(this.x*a.x,this.y*a.y)},Vector.prototype.div=function(a){return new Vector(this.x/a.x,this.y/a.y)},Vector.prototype.dot=function(a){return this.x*a.x+this.y*a.y},Vector.prototype.normal=function(){return new Vector(this.x/this.m,this.y/this.m)},Object.defineProperty(Vector.prototype,"m",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0}),a.install=function(a){a.pi=Math.PI,a.tau=Math.PI*2,a.vector=function(a,b){var c=null;return typeof a!="undefined"&&(typeof b!="undefined"?(a=+a,'
,'b=+b,!isNaN(a)&&!isNaN(b)&&isFinite(a)&&isFinite(b)&&(c=new Vector(a,b))):gamework.types.gettype(a)==="array"&&a.length===2?(b=a[1],a=a[0],c=gamework.math.vector(a,b)):gamework.types.gettype(a)==="object"&&(b=a.y,a=a.x,typeof a!="undefined"&&typeof b!="undefined"&&(c=gamework.math.vector(a,b)))),c},Object.defineProperties(a,{angleunits:{get:function(){return e},set:function(a){a=a.toLowerCase().substring(0,3),a==="rad"?(f=b,e=a):a==="deg"?(f=c,e=a):a==="rev"&&(f=d,e=a)},enumerable:!0}}),a.torad=function(a){return a*f*b},a.fromrad=function(a){return a/f/b},a.todeg=function(a){return a*f*c},a.fromdeg=function(a){return a/f/c},a.torev=function(a){return a*f*d},a.fromrev=function(a){return a/f*d},a.sin=function(a){return Math.sin(a*f)},a.cos=function(a){return Math.cos(a*f)},a.tan=function(a){return Math.tan(a*f)},a.arctan=function(a){return Math.atan(a)/f},a.arctan2=function(a,b){return Math.atan2(a,b)/f},a.exp=Math.exp,a.log=Math.log,a.log10=function(a){return Math.log(a)/Math.log(10)},a.pow=Math.pow,a.sqrt=Math'
,'.sqrt,a["int"]=Math.floor,a.round=Math.round,a.cint=Math.ceil,a.random=function(a,b){var c=0,d=1;return typeof a!="undefined"&&(typeof b!="undefined"?(c=+a,d=+b):d=+a),c+Math.random()*(d-c)},a.randomint=function(a,b){var c=0,d=1;return typeof a!="undefined"&&(typeof b!="undefined"?(c=Math.floor(a),d=Math.floor(b)):d=Math.floor(a)),d+=1,c+Math.floor(Math.random()*(d-c))},a.randompick=function(a){var b,c=gamework.types.gettype(a);if(c==="string"||c==="array")return a[gamework.math.randomint(a.length-1)];if(c==="object")return b=gamework.collections.keys(a),b[gamework.math.randomint(b.length-1)]},a.min=Math.min,a.max=Math.max,a.sum=function(){var a=Array.prototype.slice.call(arguments),b=gamework.types.gettype(a[0]);return a.length===0?0:a.length===1?b==="number"?a[0]:b==="object"||b==="array"?gamework.collections.reduce(function(a,b){return a+b},0,a[0]):+a[0]:gamework.math.sum(a)},a.mean=function(){var a=Array.prototype.slice.call(arguments),b=gamework.types.gettype(a[0]);return a.length===0?0:a.length===1?b==="number"?'
,'a[0]:b==="object"||b==="array"?gamework.math.sum(a[0])/gamework.collections.len(a[0]):+a[0]:gamework.math.mean(a)},a.abs=Math.abs,a.normal=function(a){return a===0?0:a/gamework.math.abs(a)},a.bound=function(a,b,c){return Math.max(a,Math.min(c,b))},a.wrapint=function(a,b){return a=Math.floor(a),b=Math.floor(b),isFinite(a)&&isFinite(b)?(a>=0?a%=b:a=(b-Math.abs(a)%b)%b,a):NaN},a.identity=function(a){return a},a.curry=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);return function(){var c=Array.prototype.slice.call(arguments);return a.apply(this,b.concat(c))}},a.isnan=Math.isNaN,a.isnumber=function(a){return!Math.isNaN(a)},a.isfinite=Math.isFinite,a.isinfinite=function(a){return!Math.isFinite(a)},a.isodd=function(a){return a%2===1},a.iseven=function(a){return a%2===0},a.iszero=function(a){return a===0},a.isnonzero=function(a){return a!==0}},a.install(a)}(gamework.math),function(a,b){"use strict";var c=null,d=null,e=0,f=0,g={},h={left:37,right:39,up:38,down:40,enter:13,"return":13,backspace:8'
,',del:46,"delete":46,ins:45,insert:45,home:36,end:35,esc:27,pageup:33,pgup:33,pagedown:34,pgdown:34,tab:9,capslock:20,caps:20,shift:16,control:17,ctrl:17,ctl:17,alternate:18,alt:18,meta:18,space:32,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57},i={};a.install=function(a){Object.defineProperties(a,{mousex:{get:function(){return e},enumerable:!0},mousey:{get:function(){return f},enumerable:!0}}),a.mousebutton=function(a){return g[a]||0},a.keydown=function(a){var b;return typeof a=="string"?b=h[a.trim().toLowerCase()]:b=+a,i[b]||0}},b.inputHook=function(a,b){!d,d=b,window.onblur=function(){g={}},a.onkeyup=function(a){return typeof a=="undefined"&&(a=window.event),i[a.keyCode]=0,!1},a.onkeydown=function(a){return typeof a=="undefined"&&(a=window.event),i[a.keyCode]=(i[a.keyCode]||0)+1,!1},d.onmousemove=function(a){return typeof a=="undefined"&&(a=window.event),e=a.pageX-d.offsetWidth/2'
,',f=-(a.pageY-d.offsetHeight/2),!1},d.onmousedown=function(a){return typeof a=="undefined"&&(a=window.event),g[a.which]=1,!1},d.onmouseup=function(a){return typeof a=="undefined"&&(a=window.event),g[a.which]=0,!1},d.oncontextmenu=function(){return!1}},a.install(a)}(gamework.input,gamework.internal),function(a){function c(a){var c,d=null;return b.hasOwnProperty(a)?d=b[a]:(d=new Audio,d.setAttribute("preload","preload"),gamework.game.startloadtask(),d.oncanplay=function(){gamework.game.endloadtask()},c=document.createElement("source"),c.setAttribute("src","game/resources/"+a+".ogg"),c.setAttribute("type","audio/ogg"),d.appendChild(c),c=document.createElement("source"),c.setAttribute("src","game/resources/"+a+".mp3"),c.setAttribute("type","audio/mp3"),d.appendChild(c),c=document.createElement("source"),c.setAttribute("src","game/resources/"+a+".wav"),c.setAttribute("type","audio/wav"),d.appendChild(c),d.load(),b[a]=d,document.body.appendChild(d)),d}function d(a){var d;b.hasOwnProperty(a)?d=b[a]:d=c(a),d.cloneNode(!0'
,").play()}var b={};a.install=function(a){a.loadsound=c,a.playsound=d},a.install(a)}(gamework.sound),gamework.internal.NAMED_COLORS={aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],cyan:[0,255,255],darkgoldenrod:[184,134,11],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220"
,",220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrod:[238,221,130],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslate:[132,112,255],lightslategray:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[176,48,96],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumviolet"
,":[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[160,32,240],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],violetred:[208,32,144],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245"
,',245],yellow:[255,255,0],yellowgreen:[154,205,50]},function(a){function c(){this.width=1,this.height=1,this.tiles=[]}"use strict";var b={tile:0,base:0};c.prototype.draw=function(c,d,e,f){var g,h,i,j,k,l=e/this.width,m=f/this.height,n=a.getTileSet(d);if(n!==null){j=f/2-m/2;for(g=0;g<this.height;g+=1){i=-(e/2)+l/2;for(h=0;h<this.width;h+=1)k=(this.tiles[g]||[])[h]||b,c.save(),c.translate(i,j),typeof k.tile=="string"?n.drawAnimatedTile(c,k.tile,k.base,l,m):n.drawIndexedTile(c,k.tile,l,m),c.restore(),i+=l;j-=m}}},c.prototype.resize=function(a,b,c){},c.prototype.tile=function(a,b,c){var d,e,f=0,g=0,h,i=gamework.graphics.framecount;typeof c!="undefined"?(f=+a,g=+b,h=c):typeof b!="undefined"?isNaN(a)?(e=gamework.math.vector(a),f=e.x,g=e.y,h=b):(f=+a,g=+b):typeof a!="undefined"&&(!isNaN(a)||typeof a=="string"?h=a:(e=gamework.math.vector(a),f=e.x,g=e.y));if(isFinite(f)&&f>=0&&isFinite(g)&&g>=0)if(typeof h=="undefined")h=(this.tiles[g]||[])[f]||0;else if(isFinite(h)||typeof h=="string"){while(this.tiles.length<=g)this.tiles'
,'.push([]);while(this.tiles[g].length<=f)this.tiles[g].push(null);d=this.tile(f,g).tile,h!==d&&(this.tiles[g][f]={tile:h,base:i}),this.width<=f&&(this.width=f+1),this.height<=g&&(this.height=g+1)}else h="";else h="";return h},a.install=function(a){a.TileMap=c},a.install(a)}(gamework.internal),function(a){function b(a,b,c,d,e){var f=d/2*.5522848,g=e/2*.5522848,h=b+d,i=c+e,j=b+d/2,k=c+e/2;a.moveTo(b,k),a.bezierCurveTo(b,k-g,j-f,c,j,c),a.bezierCurveTo(j+f,c,h,k-g,h,k),a.bezierCurveTo(h,k+g,j+f,i,j,i),a.bezierCurveTo(j-f,i,b,k+g,b,k),a.closePath()}function c(b,c){this.name=b,this.layer=c,this.position=gamework.math.vector(0,0),this.angle=0,this.size=gamework.math.vector(40,40),this.pen={down:!1,color:gamework.graphics.color(0,0,0),cssColor:"rgb(0,0,0)",size:1},this.fill={color:gamework.graphics.color(1,1,1),cssColor:"rgb(255,255,255)"},this.scale={x:1,y:1,both:1},this.visible=1,this.skin="arrow",this.image="",this.tileset="",this.tilemap=new a.TileMap,this.userUpdateFunction=null,this.data={}}"use strict",c.prototype'
,'.rename=function(b){var c;return b=a.validateId(b),c=b.toLowerCase(),b!==""&&!this.layer.sprites.hasOwnProperty(c)&&(delete this.layer.sprites[this.name.toLowerCase()],this.layer.sprites[c]=this,this.name=b),this.name},c.prototype.update=function(a){var b=this.layer.currentSprite;this.userUpdateFunction&&(this.layer.currentSprite=this,this.userUpdateFunction(),this.layer.currentSprite=b),this.draw(a)},c.prototype.draw=function(a){if(this.visible>0){a.save(),a.translate(this.position.x,this.position.y),a.scale(this.scale.x,this.scale.y),a.rotate(-this.angle),a.globalAlpha=this.visible;switch(this.skin){case"arrow":this.drawArrowSprite(a);break;case"rectangle":this.drawRectangleSprite(a);break;case"square":this.drawSquareSprite(a);break;case"ellipse":this.drawEllipseSprite(a);break;case"circle":this.drawCircleSprite(a);break;case"pacman":this.drawPacManSprite(a);break;case"ghost":this.drawGhostSprite(a);break;case"image":this.drawImageSprite(a);break;case"tilemap":this.drawTileMapSprite(a)}a.restore()}},c.prototype'
,'.drawDebugInfo=function(a){var b=this.size.x*this.scale.x,c=this.size.y*this.scale.y,d=this.visible?1:.333,e=gamework.graphics.color(this.fill.color.r,this.fill.color.g,this.fill.color.b,this.fill.color.a*d),f=gamework.graphics.color(this.pen.color.r,this.pen.color.g,this.pen.color.b,this.pen.color.a*d),g=this.pen.size*2;this.layer.currentSprite===this?a.strokeStyle="rgba(255, 0, 0, "+d+")":a.strokeStyle="rgba(0, 0, 255, "+d+")",a.save(),a.translate(this.position.x,this.position.y),a.beginPath(),a.moveTo(-5,0),a.lineTo(5,0),a.moveTo(0,-5),a.lineTo(0,5),a.stroke(),a.save(),a.rotate(-this.angle),a.lineWidth=1,a.strokeRect(-b/2,-c/2,b,c),a.restore(),a.fillStyle=a.strokeStyle,a.scale(1,-1),a.textBaseline="middle",a.font="12px sans-serif",a.fillText(this.name,b/2+3,0),a.translate(-b/2-3-g*1.5,0),a.fillStyle=e.tocss(),a.beginPath(),a.arc(0,0,g,0,Math.PI*2),a.fill(),a.strokeStyle=f.tocss(),a.lineWidth=this.pen.size,a.beginPath(),a.arc(0,0,g,0,Math.PI*2),a.stroke(),this.pen.down&&a.rotate(Math.PI),a.fillStyle="black",'
,'a.beginPath(),a.moveTo(0,-g*1.5-8),a.lineTo(3,-g*1.5-4),a.lineTo(-3,-g*1.5-4),a.fill(),a.restore()},c.prototype.drawArrowSprite=function(a){var b=Math.min(this.size.x,this.size.y);a.scale(b/36,b/36),a.strokeStyle="white",a.lineWidth=5,a.beginPath(),a.moveTo(10.405,-5.978),a.lineTo(0,12),a.lineTo(-10.405,-5.978),a.stroke(),a.strokeStyle="black",a.lineWidth=3,a.beginPath(),a.moveTo(10.405,-5.978),a.lineTo(0,12),a.lineTo(-10.405,-5.978),a.stroke(),a.strokeStyle="white",a.lineWidth=1,a.beginPath(),a.arc(0,0,3.5,0,Math.PI*2),a.stroke(),this.pen.down?(a.fillStyle=this.pen.cssColor,a.beginPath(),a.arc(0,0,3,0,Math.PI*2),a.fill()):(a.strokeStyle=this.pen.cssColor,a.beginPath(),a.arc(0,0,2.5,0,Math.PI*2),a.stroke())},c.prototype.drawImageSprite=function(b){var c;this.image&&(c=a.getImage(this.image),c.ready&&(b.save(),b.scale(1,-1),b.drawImage(c,-this.size.x/2,-this.size.y/2),b.restore()))},c.prototype.drawRectangleSprite=function(a){var b=this.size.x,c=this.size.y;a.fillStyle=this.fill.cssColor,a.fillRect(-b/2,-c/2,b,'
,"c),a.strokeStyle=this.pen.cssColor,a.lineWidth=this.pen.size,a.strokeRect(-b/2,-c/2,b,c)},c.prototype.drawSquareSprite=function(a){var b=Math.min(this.size.x,this.size.y);a.fillStyle=this.fill.cssColor,a.fillRect(-b/2,-b/2,b,b),a.strokeStyle=this.pen.cssColor,a.lineWidth=this.pen.size,a.strokeRect(-b/2,-b/2,b,b)},c.prototype.drawEllipseSprite=function(a){a.fillStyle=this.fill.cssColor,a.beginPath(),b(a,-this.size.x/2,-this.size.y/2,this.size.x,this.size.y),a.fill(),a.strokeStyle=this.pen.cssColor,a.lineWidth=this.pen.size,a.beginPath(),b(a,-this.size.x/2,-this.size.y/2,this.size.x,this.size.y),a.stroke()},c.prototype.drawCircleSprite=function(a){var b=Math.min(this.size.x,this.size.y)/2;a.fillStyle=this.fill.cssColor,a.beginPath(),a.arc(0,0,b,0,Math.PI*2),a.fill(),a.strokeStyle=this.pen.cssColor,a.lineWidth=this.pen.size,a.beginPath(),a.arc(0,0,b,0,Math.PI*2),a.stroke()},c.prototype.drawPacManSprite=function(a){var b=Math.min(this.size.x,this.size.y)/2,c=.125*Math.max(0,1+Math.sin(+(new Date)/250*Math.PI));a.scale"
,'(1,-1),a.rotate(-Math.PI/2),a.fillStyle=this.fill.cssColor,a.beginPath(),a.moveTo(0,0),a.arc(0,0,b,Math.PI*c,Math.PI*(2-c)),a.lineTo(0,0),a.fill()},c.prototype.drawGhostSprite=function(a){var b=Math.min(this.size.x,this.size.y)/2,c=b/8,d=b/(this.tile==="scared"?5:3.5);a.scale(1,-1),a.rotate(-this.angle),a.fillStyle=this.fill.cssColor,a.beginPath(),a.arc(0,0,b,Math.PI,Math.PI*2),a.arc(b/3*2,b/3*2,b/3,0,Math.PI),a.arc(0,b/3*2,b/3,0,Math.PI),a.arc(-(b/3)*2,b/3*2,b/3,0,Math.PI),a.fill(),a.save(),a.fillStyle="white",a.translate(0,-b/6),a.rotate(this.angle),a.translate(0,-b/(this.tile==="scared"?20:6)),a.rotate(-this.angle),a.translate(-b/3,0),a.beginPath(),a.arc(0,0,d,0,Math.PI*2),a.arc(b/3*2,0,d,0,Math.PI*2),a.fill(),a.restore(),this.tile!=="scared"?(a.fillStyle=this.pen.cssColor,a.translate(0,-b/6),a.rotate(this.angle),a.translate(0,-b/3.5),a.rotate(-this.angle),a.translate(-b/3,0),a.beginPath(),a.arc(0,0,b/9,0,Math.PI*2),a.arc(b/3*2,0,b/9,0,Math.PI*2),a.fill()):(a.lineWidth=b/10,a.strokeStyle="white",a.translate'
,"(0,b/3),a.beginPath(),a.moveTo(-c*4,c),a.lineTo(-c*3,0),a.lineTo(-c*2,c),a.lineTo(-c*1,0),a.lineTo(0,c),a.lineTo(c*1,0),a.lineTo(c*2,c),a.lineTo(c*3,0),a.lineTo(c*4,c),a.stroke())},c.prototype.drawTileMapSprite=function(a){this.tilemap.draw(a,this.tileset,this.size.x,this.size.y)},c.prototype.getPosition=function(){return this.position},c.prototype.setPosition=function(a,b){var c=gamework.math.vector(a,b);c!==null&&(this.position=c)},c.prototype.getX=function(){return this.position.x},c.prototype.getY=function(){return this.position.y},c.prototype.setX=function(a){var b=this.position;a=+a,!isNaN(a)&&isFinite(a)&&(this.position=gamework.math.vector(a,b.y))},c.prototype.setY=function(a){var b=this.position;a=+a,!isNaN(a)&&isFinite(a)&&(this.position=gamework.math.vector(b.x,a))},c.prototype.moveTo=function(a,b){var c=gamework.math.vector(a,b);c!==null&&(this.position=c)},c.prototype.lineTo=function(a,b){var c=gamework.math.vector(a,b),d=this.layer.gfx.paper;c!==null&&(d.strokeStyle=this.pen.cssColor,d.lineWidth="
,'this.pen.size,d.beginPath(),d.moveTo(this.position.x,this.position.y),d.lineTo(c.x,c.y),d.stroke(),this.position=c)},c.prototype.penTo=function(a,b){var c=gamework.math.vector(a,b);c!==null&&(this.pen.down?this.lineTo(c):this.moveTo(c))},c.prototype.penBy=function(a,b){var c=gamework.math.vector(a,b);c!==null&&this.penTo(this.position.x+c.x,this.position.y+c.y)},c.prototype.forward=function(a){a=+a,!isNaN(a)&&isFinite(a)&&this.penBy(Math.sin(this.angle)*a,Math.cos(this.angle)*a)},c.prototype.back=function(a){this.forward(-a)},c.prototype.formation=function(b,c,d){var e,f=gamework.math.vector(c,d),g;b=a.validateId(b).toLowerCase(),f!==null&&b!==""&&this.layer.sprites.hasOwnProperty(b)&&(e=this.layer.sprites[b],g=Math.atan2(-f.y,f.x),this.angle=e.angle,this.penTo(e.position.x+Math.cos(g+this.angle)*f.m,e.position.y-Math.sin(g+this.angle)*f.m))},c.prototype.getAngle=function(){return gamework.math.fromrad(this.angle)},c.prototype.setAngle=function(a){a=+a,isNaN(a)||(this.angle=gamework.math.torad(a))},c.prototype'
,'.turnTo=function(a,b){var c;a=gamework.math.torad(+a),typeof b!="undefined"?b=gamework.math.torad(Math.abs(+b)):b=Infinity,!isNaN(a)&&!isNaN(b)&&(isFinite(b)?(c=a-this.angle,c<-Math.PI?c+=Math.PI*2:c>Math.PI&&(c-=Math.PI*2),c>=0?this.angle+=Math.min(Math.abs(c),b):this.angle-=Math.min(Math.abs(c),b)):this.angle=a)},c.prototype.lookAt=function(a,b,c){var d,e,f,g,h=Infinity;typeof a!="undefined"&&(typeof b!="undefined"?typeof c!="undefined"?(e=+a,f=+b,h=+c):!isNaN(a)&&!isNaN(b)?(e=+a,f=+b):(d=gamework.math.vector(a),e=d.x,f=d.y,h=+b):(d=gamework.math.vector(a),e=d.x,f=d.y)),isNaN(e)||isNaN(f)||isNaN(h)||(g=gamework.math.arctan2(e-this.position.x,f-this.position.y),this.turnTo(g,h))},c.prototype.lookAway=function(a,b,c){var d,e,f,g,h=Infinity;typeof a!="undefined"&&(typeof b!="undefined"?typeof c!="undefined"?(e=+a,f=+b,h=+c):!isNaN(a)&&!isNaN(b)?(e=+a,f=+b):(d=gamework.math.vector(a),e=d.x,f=d.y,h=+b):(d=gamework.math.vector(a),e=d.x,f=d.y)),isNaN(e)||isNaN(f)||isNaN(h)||(g=gamework.math.arctan2(this.position.x-'
,'e,this.position.y-f),this.turnTo(g,h))},c.prototype.rotate=function(a){a=+a,isNaN(a)||(this.angle+=gamework.math.torad(a))},c.prototype.rotatecc=function(a){this.rotate(-a)},c.prototype.right=c.prototype.rotate,c.prototype.left=c.prototype.rotatecc,c.prototype.getSize=function(){return this.size},c.prototype.setSize=function(a,b){var c=vector(a,b);c!==null&&(this.size=c)},c.prototype.getWidth=function(){return this.size.x},c.prototype.setWidth=function(a){a=+a,isNaN(a)||(this.size=vector(a,this.size.y))},c.prototype.getHeight=function(){return this.size.y},c.prototype.setHeight=function(a){a=+a,isNaN(a)||(this.size=vector(this.size.x,a))},c.prototype.getSkin=function(){return this.skin},c.prototype.setSkin=function(a){a=a.toString().toLowerCase(),gamework.collections.contains(["arrow","circle","ellipse","square","rectangle","pacman","ghost","image","tilemap"],a)&&(this.skin=a)},c.prototype.getImage=function(){return this.image},c.prototype.setImage=function(a){a+="",a&&(this.image=a)},c.prototype.tile=function('
,'a,b,c){return this.tilemap.tile(a,b,c)},c.prototype.getTileSet=function(){return this.tileset},c.prototype.setTileSet=function(b){b=a.validateId(b),b!==""&&(this.tileset=b)},c.prototype.getUserUpdateFunction=function(){return this.userUpdateFunction},c.prototype.setUserUpdateFunction=function(a){a===null?this.userUpdateFunction=null:typeof a=="function"&&(this.userUpdateFunction=a)},c.prototype.getPenColor=function(){return this.pen.color},c.prototype.setPenColor=function(a,b,c,d){var e=gamework.graphics.color(a,b,c,d);e!==null&&(this.pen.color=e,this.pen.cssColor=e.tocss())},c.prototype.getFillColor=function(){return this.pen.color},c.prototype.setFillColor=function(a,b,c,d){var e=gamework.graphics.color(a,b,c,d);e!==null&&(this.fill.color=e,this.fill.cssColor=e.tocss())},c.prototype.getPenSize=function(){return this.pen.size},c.prototype.setPenSize=function(a){a=+a,!isNaN(a)&&isFinite(a)&&(this.pen.size=a)},c.prototype.isPenDown=function(){return this.pen.down},c.prototype.setPenDown=function(a){this.pen.down=!!'
,"a},c.prototype.penDown=function(){this.pen.down=!0},c.prototype.penUp=function(){this.pen.down=!1},c.prototype.togglePen=function(){this.pen.down=!this.pen.down},c.prototype.isVisible=function(){return!!this.visible},c.prototype.setVisible=function(a){this.visible=a?1:0},c.prototype.getOpacity=function(){return this.visible},c.prototype.setOpacity=function(a){this.visible=gamework.math.bound(0,a,1)},c.prototype.show=function(){this.visible=1},c.prototype.hide=function(){this.visible=0},c.prototype.otherSpritesName=function(a){a=!!a},c.prototype.closestSpriteName=function(a){a=!!a},c.prototype.getData=function(){return this.data},c.prototype.setData=function(a){this.data=a},c.prototype.stamp=function(){var a=this.layer.gfx.paper,b=a.globalAlpha;a.save(),this.draw(a),a.restore(),a.globalAlpha=b},a.install=function(a){a.Sprite=c},a.install(a)}(gamework.internal),function(a){function b(a){a.setTransform(1,0,0,1,0,0)}function c(a){a.save(),b(a),a.clearRect(0,0,a.canvas.width,a.canvas.height),a.restore()}function d("
,'a,b){this.name=a,this.screen=b,this.sprites={},this.currentSprite=null,this.nextSpriteId=0,this.els={container:document.createElement("div"),paper:document.createElement("canvas"),tiles:document.createElement("canvas"),sprites:document.createElement("canvas")},this.els.container.setAttribute("id","layer-"+a),this.els.container.setAttribute("class","gw-layer"),this.els.paper.setAttribute("class","gw-sublayer"),this.els.tiles.setAttribute("class","gw-sublayer"),this.els.sprites.setAttribute("class","gw-sublayer"),this.els.container.appendChild(this.els.paper),this.els.container.appendChild(this.els.tiles),this.els.container.appendChild(this.els.sprites),this.gfx={paper:this.els.paper.getContext("2d"),sprites:this.els.sprites.getContext("2d")},this.onResize(),this.newSprite("default"),this.sprites["default"].hide(),this.sprites["default"].penDown()}"use strict",d.prototype.getZ=function(){return this.z},d.prototype.setZ=function(a){var b,c=this.screen.getLayerCount()-1;isNaN(a)||(a=gamework.math.bound(0,+a,c),a!=='
,'this.z&&(b=this.screen.layers.order[a+1],this.screen.layers.order.splice(this.z,1),this.screen.els.page.removeChild(this.els.container),a===0?(this.screen.els.page.insertBefore(this.els.container,this.screen.els.page.firstChild),this.screen.layers.order.unshift(this)):a===c?(this.screen.els.page.appendChild(this.els.container),this.screen.layers.order.push(this)):(this.screen.els.page.insertBefore(this.els.container,b.els.container),this.screen.layers.order.splice(a,0,this)),this.screen.recalcLayersZ()))},d.prototype.rename=function(b){var c;return b=a.validateId(b),c=b.toLowerCase(),b!==""&&!this.screen.layers.lookup.hasOwnProperty(c)&&(delete this.screen.layers.lookup[this.name.toLowerCase()],this.screen.layers.lookup[c]=this,this.name=b,this.els.container.setAttribute("id","layer-"+b)),this.name},d.prototype.toBottom=function(){return this.setZ(0),this.z},d.prototype.moveDown=function(a){return typeof a=="undefined"&&(a=1),isFinite(a)&&this.setZ(this.z- +a),this.z},d.prototype.moveUp=function(a){return typeof '
,'a=="undefined"&&(a=1),isFinite(a)&&this.setZ(this.z+ +a),this.z},d.prototype.toTop=function(){return this.setZ(this.screen.getLayerCount()-1),this.z},d.prototype.update=function(){var a=this;c(a.gfx.sprites),gamework.collections.foreach(function(b){b.update(a.gfx.sprites)},a.sprites)},d.prototype.generateSpriteName=function(){var a;do a="$"+this.nextSpriteId+"$",this.nextSpriteId+=1;while(this.sprites.hasOwnProperty(a));return a},d.prototype.newSprite=function(b){var c,d;return b||(b=this.generateSpriteName()),b=a.validateId(b),d=b.toLowerCase(),b!==""&&(this.sprites.hasOwnProperty(d)?b="":(c=new a.Sprite(b,this),this.sprites[d]=c,this.currentSprite=c)),b},d.prototype.removeSprite=function(b){var c,d="";return typeof b=="undefined"&&(b=this.currentSprite.name),b=a.validateId(b).toLowerCase(),b!==""&&gamework.collections.len(this.sprites)>1&&this.sprites.hasOwnProperty(b)&&(c=this.sprites[b],delete this.sprites[b],this.currentSprite===c&&(this.currentSprite=gamework.collections.values(this.sprites)[0]),d=c.name'
,'),d},d.prototype.getCurrentSpriteName=function(){return this.currentSprite.name},d.prototype.setCurrentSpriteName=function(b){b=a.validateId(b).toLowerCase(),b!==""&&this.sprites.hasOwnProperty(b)&&(this.currentSprite=this.sprites[b])},d.prototype.onResize=function(){var a=this.screen.getSize();this.els.paper.setAttribute("width",a.x),this.els.paper.setAttribute("height",a.y),this.els.tiles.setAttribute("width",a.x),this.els.tiles.setAttribute("height",a.y),this.els.sprites.setAttribute("width",a.x),this.els.sprites.setAttribute("height",a.y),b(this.gfx.paper),this.gfx.paper.translate(Math.floor(a.x/2),Math.floor(a.y/2)),this.gfx.paper.scale(1,-1),this.gfx.sprites.setTransform(1,0,0,1,0,0),this.gfx.sprites.translate(Math.floor(a.x/2),Math.floor(a.y/2)),this.gfx.sprites.scale(1,-1)},d.prototype.getSpritesByName=function(){return gamework.collections.keys(this.sprites)},d.prototype.clear=function(){var a=this.gfx.paper;a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,a.canvas.width,a.canvas.height),a.restore'
,'()},a.install=function(a){a.Layer=d},a.install(a)}(gamework.internal),function(a){function b(b){this.parent=null,this.config={size:gamework.math.vector(400,400),borderColor:gamework.graphics.color("#222222"),pageColor:gamework.graphics.color("#808080")},this.layers={lookup:{},order:[],current:null},this.els={border:document.createElement("div"),page:document.createElement("div")},this.els.border.setAttribute("class","gw-screen"),this.els.page.setAttribute("class","gw-page"),this.els.border.appendChild(this.els.page),this.setBorderColor(this.config.borderColor),this.setPageColor(this.config.pageColor),this.setSize(this.config.size),b&&this.setParent(b),a.inputHook(window,this.els.border),this.newLayer("default")}"use strict",b.prototype.update=function(){var a=this;gamework.collections.foreach(function(a){a.update()},a.layers.order)},b.prototype.getParent=function(){return this.parent},b.prototype.setParent=function(a){this.parent&&this.parent.removeChild(this.els.border),a.appendChild(this.els.border),this.parent='
,'a},b.prototype.getSize=function(){return this.config.size},b.prototype.setSize=function(a,b){var c=this,d=gamework.math.vector(a,b);d!==null&&(this.config.size=d,this.els.page.style.width=d.x+"px",this.els.page.style.height=d.y+"px",this.els.page.style.marginLeft=-d.x/2+"px",this.els.page.style.marginTop=-d.y/2+"px",gamework.collections.foreach(function(a){a.onResize()},c.layers.order))},b.prototype.getBorderColor=function(){return this.config.borderColor},b.prototype.setBorderColor=function(a,b,c,d){var e=gamework.graphics.color(a,b,c,d);e!==null&&(this.config.borderColor=e,this.els.border.style.background=e.tocss())},b.prototype.getPageColor=function(){return this.config.pageColor},b.prototype.setPageColor=function(a,b,c,d){var e=gamework.graphics.color(a,b,c,d);e!==null&&(this.config.pageColor=e,this.els.page.style.background=e.tocss())},b.prototype.recalcLayersZ=function(){var a;for(a=0;a<this.layers.order.length;a+=1)this.layers.order[a].z=a},b.prototype.newLayer=function(b,c){var d,e,f;if(typeof c=="undefined"'
,')c="above";else{c=c.trim().toLowerCase();if(c!=="above"&&c!=="below")return""}return b=a.validateId(b),f=b.toLowerCase(),b!==""&&(this.layers.lookup.hasOwnProperty(f)?b="":(e=new a.Layer(b,this),this.layers.lookup[f]=e,this.layers.current?c==="above"?(this.layers.current.els.container.nextSibling?this.els.page.insertBefore(e.els.container,this.layers.current.els.container.nextSibling):this.els.page.appendChild(e.els.container),this.layers.order.splice(this.layers.current.z+1,0,e)):(this.els.page.insertBefore(e.els.container,this.layers.current.els.container),this.layers.order.splice(this.layers.current.z,0,e)):(this.els.page.appendChild(e.els.container),this.layers.order.push(e)),this.layers.current=e,this.recalcLayersZ())),b},b.prototype.removeLayer=function(b){var c,d;return this.layers.order.length>1?(typeof b=="undefined"?b=this.layers.current.name:b=a.validateId(b),c=b.toLowerCase(),this.layers.lookup.hasOwnProperty(c)?(d=this.layers.lookup[c],delete this.layers.lookup[c],this.layers.order.splice(d.z,1),this'
,'.els.page.removeChild(d.els.container),this.recalcLayersZ(),this.layers.current===d&&(this.layers.current=this.layers.order[gamework.math.bound(0,d.z,this.layers.order.length-1)])):b=""):b="",b},b.prototype.getLayersByName=function(){var a=this;return map(function(a){return a.name},a.layers.order)},b.prototype.getCurrentLayer=function(){return this.layers.current},b.prototype.setCurrentLayer=function(a){gamework.collections.contains(this.layers.order,a)&&(this.layers.current=a)},b.prototype.setCurrentLayerByName=function(b){b=a.validateId(b).toLowerCase(),this.layers.lookup.hasOwnProperty(b)&&(this.layers.current=this.layers.lookup[b])},b.prototype.getLayerCount=function(){return this.layers.order.length},a.install=function(a){a.Screen=b},a.install(a)}(gamework.internal),function(a,b){function e(a,b,c,d,e){}function f(a,c,d,e,f,g,h,i){this.name=a,this.imagename=c,this.image=b.getImage(c),this.tilewidth=d,this.tileheight=e,this.left=f,this.top=g,this.right=h,this.bottom=i,this.widthInTiles=-1,this.heightInTiles=-1'
,',this.tiles=-1,this.animations={}}function g(a,c,e,g,h,i,j,k){var l,m,n=null,o=gamework.math.vector(0,0),p=gamework.math.vector(-1,-1);return a=b.validateId(a),m=a.toLowerCase(),typeof k!="undefined"?(n=gamework.math.vector(+e,+g),o=gamework.math.vector(+h,+i),p=gamework.math.vector(+j,+k)):typeof j!="undefined"?isNaN(e)?(n=gamework.math.vector(e),o=gamework.math.vector(+g,+h),p=gamework.math.vector(+i,+j)):isNaN(h)?(n=gamework.math.vector(+e,+g),o=gamework.math.vector(h),p=gamework.math.vector(+i,+j)):isNaN(j)&&(n=gamework.math.vector(+e,+g),o=gamework.math.vector(+h,+i),p=gamework.math.vector(j)):typeof i!="undefined"?isNaN(e)||isNaN(g)||isNaN(h)||isNaN(i)?isNaN(e)?isNaN(g)?isNaN(h)||(n=gamework.math.vector(e),o=gamework.math.vector(g),p=gamework.math.vector(+h,+i)):(n=gamework.math.vector(e),o=gamework.math.vector(+g,+h),p=gamework.math.vector(i)):(n=gamework.math.vector(+e,+g),o=gamework.math.vector(h),p=gamework.math.vector(i)):(n=gamework.math.vector(+e,+g),o=gamework.math.vector(+h,+i)):typeof h!="undefined"?'
,'isNaN(e)&&isNaN(g)&&isNaN(h)?(n=gamework.math.vector(e),o=gamework.math.vector(g),p=gamework.math.vector(h)):isNaN(e)?(n=gamework.math.vector(e),o=gamework.math.vector(+g,+h)):isNaN(h)&&(n=gamework.math.vector(+e,+g),o=gamework.math.vector(h)):typeof g!="undefined"?isNaN(e)&&isNaN(g)?(n=gamework.math.vector(e),o=gamework.math.vector(g)):!isNaN(e)&&!isNaN(g)&&(n=gamework.math.vector(+e,+g)):typeof e!="undefined"&&(n=gamework.math.vector(e)),n!==null&&o!==null&&p!==null?a!==""&&(d.hasOwnProperty(m)?a="":(l=new f(a,c,n.x,n.y,o.x,o.y,p.x,p.y),d[m]=l)):a="",a}"use strict";var c=a.install,d={};f.prototype.drawIndexedTile=function(a,b,c,d){isFinite(b)&&(b=Math.floor(+b),this.image.ready&&(this.tiles===-1&&(this.right===-1&&(this.right=this.image.width),this.bottom===-1&&(this.bottom=this.image.height),this.widthInTiles=Math.floor((this.right-this.left)/this.tilewidth),this.heightInTiles=Math.floor((this.bottom-this.top)/this.tileheight),this.tiles=this.widthInTiles*this.heightInTiles),b=gamework.math.wrapint(b,this.tiles+1'
,'),b>0&&(b-=1,a.save(),a.scale(1,-1),a.drawImage(this.image,this.left+b%this.widthInTiles*this.tilewidth,this.top+Math.floor(b/this.widthInTiles)*this.tileheight,this.tilewidth,this.tileheight,-c/2,-d/2,c,d),a.restore())))},f.prototype.drawAnimatedTile=function(a,c,d,e,f){var g,h;c=b.validateId(c).toLowerCase();if(c!==""){g=this.animations[c];if(g){switch(g.loop){case"cycle":h=Math.floor((gamework.graphics.framecount-d)/g.rate)%g.frames.length}this.drawIndexedTile(a,g.frames[h],e,f)}}},a.install=function(a){a.newtileset=g,a.newanimation=function(a,c,d,e,f){var g,h,i,j=!0;return a=b.validateId(a),c=b.validateId(c),h=c.toLowerCase(),typeof e=="undefined"&&(e="cycle"),typeof f=="undefined"&&(f=1),e=b.validateId(e).toLowerCase(),f=Math.floor(+f),a!==""&&c!==""&&gamework.types.gettype(d)==="array"&&gamework.collections.contains(["cycle","pingpong","none"],e)&&isFinite(f)&&f>0?(d=gamework.collections.map(function(a){return+a},d),j=gamework.collections.reduce(function(a,b){return a&&!isNaN(b)},j,d),g=b.getTileSet(a),g!=='
,'null&&j?g.animations.hasOwnProperty(h)?c="":(i={name:c,frames:d,loop:e,rate:f},g.animations[h]=i):c=""):c="",c},a.renametileset=function(a,b){},c&&c(a)},b.getTileSet=function(a){return a=b.validateId(a).toLowerCase(),a!==""&&d.hasOwnProperty(a)?d[a]:null},a.install(a)}(gamework.graphics,gamework.internal),function(a,b){function Color(a,b,c,d){this.r=a,this.g=b,this.b=c,this.a=d,Object.freeze(this)}function g(a,c,d,e){var f,g,h,i,j=null;if(typeof a!="undefined")if(typeof c!="undefined"&&typeof d!="undefined")f=+a,g=+c,h=+d,typeof e!="undefined"?i=+e:i=1;else switch(gamework.types.gettype(a)){case"string":a=a.trim(),b.NAMED_COLORS.hasOwnProperty(a.toLowerCase())?(f=b.NAMED_COLORS[a][0]/255,g=b.NAMED_COLORS[a][1]/255,h=b.NAMED_COLORS[a][2]/255,i=1):a[0]==="#"&&(a.length===4?(f=parseInt(a[1],16)/15,g=parseInt(a[2],16)/15,h=parseInt(a[3],16)/15,i=1):a.length===5?(f=parseInt(a[1],16)/15,g=parseInt(a[2],16)/15,h=parseInt(a[3],16)/15,i=parseInt(a[4],16)/15):a.length===7?(f=parseInt(a[1]+a[2],16)/255,g=parseInt(a[3]+a[4'
,'],16)/255,h=parseInt(a[5]+a[6],16)/255,i=1):a.length===9&&(f=parseInt(a[1]+a[2],16)/255,g=parseInt(a[3]+a[4],16)/255,h=parseInt(a[5]+a[6],16)/255,i=parseInt(a[7]+a[8],16)/255));break;case"array":a.length===3?(f=+a[0],g=+a[1],h=+a[2],i=1):a.length===4&&(f=+a[0],g=+a[1],h=+a[2],i=+a[3]);break;case"object":f=+a.r,g=+a.g,h=+a.b,typeof a.a!="undefined"?i=+a.a:i=1}return isNaN(f)||isNaN(g)||isNaN(h)||isNaN(i)||f>=0&&f<=1&&g>=0&&g<=1&&h>=0&&h<=1&&i>=0&&i<=1&&(j=new Color(f,g,h,i)),j}"use strict";var c=a.install,d=0,e=null,f={};Color.prototype.toString=function(){return"color("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},Color.prototype.tocss=function(){var a;return this.a!==1?a="rgba("+Math.floor(this.r*255)+","+Math.floor(this.g*255)+","+Math.floor(this.b*255)+","+this.a+")":a="rgb("+Math.floor(this.r*255)+","+Math.floor(this.g*255)+","+Math.floor(this.b*255)+")",a},a.install=function(a){Object.defineProperties(a,{framecount:{get:function(){return d},enumerable:!0},bordercolor:{get:function(){return e.getBorderColor'
,"()},set:function(a){e.setBorderColor(a)},enumerable:!0},pagecolor:{get:function(){return e.getPageColor()},set:function(a){e.setPageColor(a)},enumerable:!0},pagesize:{get:function(){return e.getSize()},set:function(a){e.setSize(a)},enumerable:!0},pagewidth:{get:function(){return e.getSize().x},set:function(a){var b=e.getSize(),c={x:a,y:b.y};e.setSize(c)},enumerable:!0},pageheight:{get:function(){return e.getSize().y},set:function(a){var b=e.getSize(),c={x:b.x,y:a};e.setSize(c)},enumerable:!0},spriteopacity:{get:function(){return e.layers.current.currentSprite.getOpacity()},set:function(a){e.layers.current.currentSprite.setOpacity(a)},enumerable:!0},spriteskin:{get:function(){return e.layers.current.currentSprite.getSkin()},set:function(a){e.layers.current.currentSprite.setSkin(a)},enumerable:!0},spriteimage:{get:function(){return e.layers.current.currentSprite.getImage()},set:function(a){e.layers.current.currentSprite.setImage(a)},enumerable:!0},pencolor:{get:function(){return e.layers.current.currentSprite.getPenColor"
,"()},set:function(a){e.layers.current.currentSprite.setPenColor(a)},enumerable:!0},fillcolor:{get:function(){return e.layers.current.currentSprite.getFillColor()},set:function(a){e.layers.current.currentSprite.setFillColor(a)},enumerable:!0},pensize:{get:function(){return e.layers.current.currentSprite.getPenSize()},set:function(a){e.layers.current.currentSprite.setPenSize(a)},enumerable:!0},ispendown:{get:function(){return e.layers.current.currentSprite.isPenDown()},set:function(a){e.layers.current.currentSprite.setPenDown(a)},enumerable:!0},spriteupdate:{get:function(){return e.layers.current.currentSprite.getUserUpdateFunction()},set:function(a){e.layers.current.currentSprite.setUserUpdateFunction(a)},enumerable:!0},spritedata:{get:function(){return e.layers.current.currentSprite.getData()},set:function(a){e.layers.current.currentSprite.setData(a)},enumerable:!0},alllayers:{get:function(){return e.getLayersByName()},enumerable:!0},currentlayer:{get:function(){return e.getCurrentLayer().name},set:function(a){"
,"e.setCurrentLayerByName(a)},enumerable:!0},layerz:{get:function(){return e.getCurrentLayer().getZ()},set:function(a){e.getCurrentLayer().setZ(a)},enumerable:!0},allsprites:{get:function(){return e.getCurrentLayer().getSpritesByName()},enumerable:!0},currentsprite:{get:function(){return e.layers.current.getCurrentSpriteName()},set:function(a){e.layers.current.setCurrentSpriteName(a)},enumerable:!0},spriteangle:{get:function(){return e.layers.current.currentSprite.getAngle()},set:function(a){e.layers.current.currentSprite.setAngle(a)},enumerable:!0},spriteposition:{get:function(){return e.layers.current.currentSprite.getPosition()},set:function(a){e.layers.current.currentSprite.setPosition(a)},enumerable:!0},spritetileset:{get:function(){return e.layers.current.currentSprite.getTileSet()},set:function(a){e.layers.current.currentSprite.setTileSet(a)},enumerable:!0},spritewidth:{get:function(){return e.layers.current.currentSprite.getWidth()},set:function(a){return e.layers.current.currentSprite.setWidth(a)},enumerable"
,':!0},spriteheight:{get:function(){return e.layers.current.currentSprite.getHeight()},set:function(a){return e.layers.current.currentSprite.setHeight(a)},enumerable:!0},spritesize:{get:function(){return e.layers.current.currentSprite.getSize()},set:function(a){return e.layers.current.currentSprite.setSize(a)},enumerable:!0},spritex:{get:function(){return e.layers.current.currentSprite.getX()},set:function(a){return e.layers.current.currentSprite.setX(a)},enumerable:!0},spritey:{get:function(){return e.layers.current.currentSprite.getY()},set:function(a){return e.layers.current.currentSprite.setY(a)},enumerable:!0}}),a.newlayer=function(a,b){return e.newLayer(a,b)},a.removelayer=function(a){return e.removeLayer(a)},a.renamelayer=function(a,c){var d,f="";return typeof c=="undefined"?f=e.getCurrentLayer().rename(a):(d=e.layers.lookup[b.validateId(a).toLowerCase()],d&&(f=d.rename(c))),f},a.layertotop=function(){return e.getCurrentLayer().toTop()},a.layerup=function(a){return e.getCurrentLayer().moveUp(a)},a.layerdown='
,'function(a){return e.getCurrentLayer().moveDown(a)},a.layertobottom=function(){return e.getCurrentLayer().toBottom()},a.resize=function(a,b){e.setSize(a,b)},a.newsprite=function(a){return e.layers.current.newSprite(a)},a.removesprite=function(a){return e.getCurrentLayer().removeSprite(a)},a.renamesprite=function(a,c){var d,f="";return typeof c=="undefined"?f=e.getCurrentLayer().currentSprite.rename(a):(d=e.getCurrentLayer().sprites[b.validateId(a).toLowerCase()],d&&(f=d.rename(c))),f},a.show=function(){e.layers.current.currentSprite.show()},a.hide=function(){e.layers.current.currentSprite.hide()},a.pendown=function(){e.layers.current.currentSprite.penDown()},a.penup=function(){e.layers.current.currentSprite.penUp()},a.togglepen=function(){e.layers.current.currentSprite.togglePen()},a.forward=function(a){e.layers.current.currentSprite.forward(a)},a.back=function(a){e.layers.current.currentSprite.back(a)},a.rotate=function(a){e.layers.current.currentSprite.rotate(a)},a.rotatecc=function(a){e.layers.current.currentSprite'
,".rotatecc(a)},a.right=function(a){e.layers.current.currentSprite.right(a)},a.lookat=function(a,b,c){e.layers.current.currentSprite.lookAt(a,b,c)},a.lookaway=function(a,b,c){e.layers.current.currentSprite.lookAway(a,b,c)},a.left=function(a){e.layers.current.currentSprite.left(a)},a.moveto=function(a,b){e.layers.current.currentSprite.moveTo(a,b)},a.lineto=function(a,b){e.layers.current.currentSprite.lineTo(a,b)},a.pento=function(a,b){e.layers.current.currentSprite.penTo(a,b)},a.loadimage=function(a){b.loadImage(a)},a.home=function(){e.layers.current.currentSprite.setPosition(0,0),e.layers.current.currentSprite.setAngle(0)},a.stamp=function(){e.layers.current.currentSprite.stamp()},a.spritetile=function(a,b,c){e.layers.current.currentSprite.tile(a,b,c)},a.clear=function(){e.layers.current.clear()},a.formation=function(a,b,c){e.layers.current.currentSprite.formation(a,b,c)},a.spritefont=function(a){},a.spritefontsize=function(a){},a.spritefontstyle=function(a){},a.print=function(a){},a.drawsquare=function(){},a.drawrectangle="
,'function(){},a.drawcircle=function(){},a.drawellipse=function(){},a.drawpolygon=function(){},a.color=g,c&&c(a)},b.graphicsOnLoad=function(a){e===null&&(e=new b.Screen),e.setParent(a)},b.graphicsUpdate=function(){e&&e.update(),d+=1},b.loadImage=function(a){var b;f.hasOwnProperty(a)||(b=new Image,typeof a=="string"&&a!==""&&(gamework.game.startloadtask(),b.onload=function(){f[a].ready=!0,gamework.game.endloadtask()},b.onerror=function(){gamework.game.endloadtask()},b.src="game/resources/"+a,f[a]=b))},b.getImage=function(a){var c;return typeof a=="string"&&a!==""&&(f.hasOwnProperty(a)||b.loadImage(a),c=f[a]),c},a.install(a)}(gamework.graphics,gamework.internal),function(a,b){function h(a,b){var c=document.createElement("script");c.onload=b,c.src=a,document.head.appendChild(c)}function i(){this.stack=[]}function j(a){this.running=!1,this.fps=30,this.interval=null,this.loopCallbacks=a,this.loadtasks=0}"use strict";var c,d,e,f=0,g=[];i.prototype.push=function(a){this.stack.push(a.toString()),this.init()},i.prototype'
,'.pop=function(){},i.prototype.set=function(){},i.prototype.init=function(){var a=this.stack[this.stack.length-1],b="init";a&&(b+="_"+a),typeof window[b]=="function"&&window[b]()},i.prototype.enter=function(){},i.prototype.update=function(){var a=this.stack[this.stack.length-1],b="update";a&&(b+="_"+a),typeof window[b]=="function"&&window[b]()},i.prototype.leave=function(){},i.prototype.term=function(){},i.prototype.change=function(a){this.stack.length===0?this.push(a):this.stack[this.stack.length-1]=a},j.prototype.setFps=function(a){a=+a,this.fps!==a&&a>0&&(this.fps=a,this.running&&(this.stop(),this.start()))},j.prototype.startloadtask=function(){this.loadtasks===0&&(c.style.display="block"),this.loadtasks+=1},j.prototype.endloadtask=function(){this.loadtasks=Math.max(0,this.loadtasks-1),this.loadtasks===0&&(c.style.display="none")},j.prototype.getFps=function(){return this.fps},j.prototype.start=function(){var a=this;this.running||(this.interval&&window.clearInterval(this.interval),this.interval=window.setInterval'
,"(function(){a.loadtasks===0&&foreach(function(a){a()},a.loopCallbacks)},1e3/this.fps),this.running=!0)},j.prototype.stop=function(){this.running&&(this.interval&&(window.clearInterval(this.interval),this.interval=null),this.running=!1)},a.install=function(a){Object.defineProperties(a,{title:{get:function(){return document.title},set:function(a){document.title=a}},fps:{get:function(){return e.getFps()},set:function(a){e.setFps(a)}}}),Object.defineProperties(a,{pushstate:{value:function(a){d.push(a)}},popstate:{value:function(){}},changestate:{value:function(a){d.change(a)}}}),Object.defineProperties(a,{startloadtask:{value:function(){e.startloadtask()}},endloadtask:{value:function(){e.endloadtask()}}}),a.start=function(){e.start()},a.stop=function(){e.stop()},a.__onloadhandler=function(a,f){return function(){b.graphicsOnLoad(document.body),a&&(gamework.types.install(window),gamework.string.install(window),gamework.collections.install(window),gamework.math.install(window),gamework.graphics.install(window),gamework"
,'.input.install(window),gamework.game.install(window),gamework.sound.install(window)),c=document.createElement("div"),c.innerHTML="Loading...",c.style.display="",c.setAttribute("class","gw-loading-overlay"),c.setAttribute("className","gw-loading-overlay"),document.body.appendChild(c),d=new i,e=new j([function(){d.update.call(d)},b.graphicsUpdate]),e.startloadtask(),e.start(),window.clearInterval(window.__titleAnimation__),document.title="Untitled Game",h(f,function(){e.endloadtask()})}}},a.install(a)}(gamework.game,gamework.internal),function(){delete gamework.internal,delete gamework.help.data,Object.freeze(window.gamework),Object.freeze(window.gamework.help),Object.freeze(window.gamework.game),Object.freeze(window.gamework.collections),Object.freeze(window.gamework.graphics),Object.freeze(window.gamework.input),Object.freeze(window.gamework.math),Object.freeze(window.gamework.music),Object.freeze(window.gamework.sound),Object.freeze(window.gamework.string),Object.freeze(window.gamework.types)}();',"<\/script>"

].join("\n")),document.write("<script>(function(){window.onload=gamework.game.__onloadhandler(true,'game/main.js');}());<\/script>")):window.onload=function(){window.clearInterval(window.__titleAnimation__),document.title="Browser insufficiently modern",document.body.innerHTML='<div class="gw-error"><h1>Browser insufficiently modern</h1><p>The browser you are using to run this game does not support some of these required technologies:<ul><li><p>ECMAScript 5<ul><li>Object.defineProperties</li></ul><ul><li>Object.freeze</li></ul></p></li><li><p>HTML5<ul><li>canvas element and 2D drawing context</li></ul></p></li></ul></p><p>To run this game please upgrade your web browser.</p></div>'}})();</script>
<style>html,body{padding:0;margin:0;width:100%;height:100%}.gw-screen{position:relative;overflow:hidden;width:100%;height:100%}.gw-page{position:absolute;left:50%;top:50%;overflow:hidden}.gw-layer{position:absolute;left:0;right:0;top:0;bottom:0}.gw-sublayer{display:block;padding:0;margin:0;position:absolute;top:0;left:0}.gw-loading-overlay{position:absolute;left:0;right:0;top:0;bottom:0}noscript.micro{padding:0;margin:0}.gw-error{padding:12px;margin:0}</style>
</head><body onclick="window.focus()"><noscript class="gw"><div class="gw-error"><h1>JavaScript disabled</h1><p>This game requires JavaScript to run. Either your browser dosn't support it, in which case you will need to upgrade to a more modern browser, or you have it disabled. Please enable JavaScript to run this game, thank you.</p></div></noscript></body></html>