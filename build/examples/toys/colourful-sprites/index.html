<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>JavaScript disabled</title><script>(function(){document.title="Loading",window.__titleAnimation__=window.setInterval(function(){document.title.length<10?document.title+=".":document.title="Loading"},500)})();</script>
<script>(function(){var a=function(){var a=document.createElement("canvas"),b=typeof Object.defineProperties=="function",c=typeof Object.freeze=="function",d=typeof a.getContext=="function",e=!1;try{a.getContext("2d"),e=!0}catch(f){}return b&&d&&e}();a?(document.write([
"<script>",'(function(){var a={};a._={},a.game={},a.collections={},a.graphics={},a.input={},a.math={},a.music={},a.sound={},a.string={},a.types={},Object.defineProperty(window,"gamework",{value:a,enumerable:!0})})(),function(a){a.validateId=function(a){return typeof a!="string"?"":(a=a.trim().split(/\\s+/).join("_"),a.match(/^[a-zA-Z_$][0-9a-zA-Z-_$]*$/)?a:"")}}(gamework._),function(a){"use strict",a.install=function(a){a.gettype=function(a){var b=typeof a;if(b==="object"){if(!a)return"null";if(a instanceof Array)return"array"}return b},a.isarray=function(a){return gamework.types.gettype(a)==="array"},a.isboolean=function(a){return gamework.types.gettype(a)==="boolean"},a.isfunction=function(a){return gamework.types.gettype(a)==="function"},a.isnull=function(a){return gamework.types.gettype(a)==="null"},a.isnumber=function(a){return gamework.types.gettype(a)==="number"},a.isobject=function(a){return gamework.types.gettype(a)==="object"},a.isstring=function(a){return gamework.types.gettype(a)==="string"},a.isundefined=function('
,'a){return gamework.types.gettype(a)==="undefined"}},a.install(a)}(gamework.types),function(a){"use strict",a.install=function(a){a.charcode=function(a){return a.charCodeAt(0)},a["char"]=function(a){return String.fromCharCode(a)},a.tobinstring=function(a){return(+a).toString(2)},a.tooctstring=function(a){return(+a).toString(8)},a.tohexstring=function(a){return(+a).toString(16)},a.frombinstring=function(a){return parseInt(a,2)},a.fromoctstring=function(a){return parseInt(a,8)},a.fromhexstring=function(a){return parseInt(a,16)}},a.install(a)}(gamework.string),function(a){"use strict",a.install=function(a){a.foreach=function(a,b){var c,d,e=gamework.types.gettype(b);if(e==="string"||e==="array")for(d=0;d<b.length;d+=1)a(b[d],d,b);else if(e==="object")for(c in b)b.hasOwnProperty(c)&&a(b[c],c,b)},a.map=function(a,b){var c,d,e,f=gamework.types.gettype(b);if(f==="string"){c="";for(e=0;e<b.length;e+=1)c+=a(b[e],e,b).toString()}else if(f==="array"){c=[];for(e=0;e<b.length;e+=1)c.push(a(b[e],e,b))}else if(f==="object"){c='
,'{};for(d in b)b.hasOwnProperty(d)&&(c[d]=a(b[d],d,b))}return c},a.reduce=function(a,b,c){var d,e,f=gamework.types.gettype(c);if(f==="string"||f==="array")for(e=0;e<c.length;e+=1)b=a(b,c[e],e,c);else if(f==="object")for(d in c)c.hasOwnProperty(d)&&(b=a(b,c[d],d,c));return b},a.filter=function(a,b){var c,d,e,f=gamework.types.gettype(b);if(f==="string"){c="";for(e=0;e<b.length;e+=1)a(b[e])&&(c+=b[e])}else if(f==="array"){c=[];for(e=0;e<b.length;e+=1)a(b[e])&&c.push(b[e])}else if(f==="object"){c={};for(d in b)b.hasOwnProperty(d)&&a(b[d])&&(c[d]=b[d])}return c},a.makearray=function(){function d(a,b,c){var e,f=[];if(b.length==1)for(e=0;e<b[0];e+=1)f.push(a.apply(this,c.concat([e])));else if(b.length>1)for(e=0;e<b[0];e+=1)f.push(d(a,b.slice(1),c.slice(1).concat([e])));return f}var a,b=Array.prototype.slice.call(arguments,1),c=[];if(arguments.length>=2){for(a=0;a<b.length-1;a+=1)c.push(0);return d(arguments[0],b,c)}},a.makezeroarray=function(){function b(){return 0}var a=Array.prototype.slice.call(arguments);return gamework'
,'.collections.makearray.apply(this,[b].concat(a))},a.makenullarray=function(){function b(){return null}var a=Array.prototype.slice.call(arguments);return gamework.collections.makearray.apply(this,[b].concat(a))},a.len=function(a){var b=gamework.types.gettype(a);if(b==="string"||b==="array")return a.length;if(b==="object")return gamework.collections.reduce(function(a){return a+1},0,a)},a.keys=function(a){var b,c=gamework.types.gettype(a),d=[];if(c==="array"||c==="string")return gamework.collections.makearray(gamework.math.identity,a.length);if(c==="object")for(b in a)a.hasOwnProperty(b)&&d.push(b);return d},a.values=function(a){var b,c=gamework.types.gettype(a),d=[];if(c==="array"||c==="string")return a.slice();if(c==="object")for(b in a)a.hasOwnProperty(b)&&d.push(a[b]);return d},a.isempty=function(a){return gamework.collections.len(a)===0},a.haskey=function(a,b){return gamework.collections.keys(a).indexOf(b)!==-1},a.contains=function(a,b){return gamework.collections.values(a).indexOf(b)!==-1}},a.install(a)}(gamework'
,'.collections),function(a){function Vector(a,b){this.x=a,this.y=b,Object.freeze(this)}"use strict";var b=1,c=Math.PI/180,d=Math.PI*2,e="deg",f=c;Vector.prototype.toString=function(){return"vector("+this.x+", "+this.y+")"},Vector.prototype.add=function(a){return new Vector(this.x+a.x,this.y+a.y)},Vector.prototype.sub=function(a){return new Vector(this.x-a.x,this.y-a.y)},Vector.prototype.mul=function(a){return new Vector(this.x*a.x,this.y*a.y)},Vector.prototype.div=function(a){return new Vector(this.x/a.x,this.y/a.y)},Vector.prototype.dot=function(a){return this.x*a.x+this.y*a.y},Vector.prototype.normal=function(){return new Vector(this.x/this.m,this.y/this.m)},Object.defineProperty(Vector.prototype,"m",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0}),a.install=function(a){a.pi=Math.PI,a.tau=Math.PI*2,a.vector=function(a,b){var c=null;return typeof a!="undefined"&&(typeof b!="undefined"?(a=+a,b=+b,!isNaN(a)&&!isNaN(b)&&isFinite(a)&&isFinite(b)&&(c=new Vector(a,b))):gamework.types.gettype'
,'(a)==="array"&&a.length===2?(b=a[1],a=a[0],c=vector(a,b)):gamework.types.gettype(a)==="object"&&(b=a.y,a=a.x,typeof a!="undefined"&&typeof b!="undefined"&&(c=gamework.math.vector(a,b)))),c},Object.defineProperties(a,{angleunits:{get:function(){return e},set:function(a){a=a.toLowerCase().substring(0,3),a==="rad"?(f=b,e=a):a==="deg"?(f=c,e=a):a==="rev"&&(f=d,e=a)},enumerable:!0}}),a.torad=function(a){return a*f*b},a.fromrad=function(a){return a/f/b},a.todeg=function(a){return a*f*c},a.fromdeg=function(a){return a/f/c},a.torev=function(a){return a*f*d},a.fromrev=function(a){return a/f*d},a.sin=function(a){return Math.sin(a*f)},a.cos=function(a){return Math.cos(a*f)},a.tan=function(a){return Math.tan(a*f)},a.arctan=function(a){return Math.atan(a)/f},a.arctan2=function(a,b){return Math.atan2(a,b)/f},a.exp=Math.exp,a.log=Math.log,a.log10=function(a){return Math.log(a)/Math.log(10)},a.pow=Math.pow,a.sqrt=Math.sqrt,a["int"]=Math.floor,a.round=Math.round,a.cint=Math.ceil,a.random=function(a,b){var c=0,d=1;return typeof '
,'a!="undefined"&&(typeof b!="undefined"?(c=+a,d=+b):d=+a),c+Math.random()*(d-c)},a.randomint=function(a,b){var c=0,d=1;return typeof a!="undefined"&&(typeof b!="undefined"?(c=Math.floor(a),d=Math.floor(b)):d=Math.floor(a)),d+=1,c+Math.floor(Math.random()*(d-c))},a.randompick=function(a){var b,c=gamework.types.gettype(a);if(c==="string"||c==="array")return a[gamework.math.randomint(a.length-1)];if(c==="object")return b=gamework.collections.keys(a),b[gamework.math.randomint(b.length-1)]},a.min=Math.min,a.max=Math.max,a.sum=function(){var a=Array.prototype.slice.call(arguments),b=gamework.types.gettype(a[0]);return a.length===0?0:a.length===1?b==="number"?a[0]:b==="object"||b==="array"?gamework.collections.reduce(function(a,b){return a+b},0,a[0]):+a[0]:gamework.math.sum(a)},a.mean=function(){var a=Array.prototype.slice.call(arguments),b=gamework.types.gettype(a[0]);return a.length===0?0:a.length===1?b==="number"?a[0]:b==="object"||b==="array"?gamework.math.sum(a[0])/gamework.collections.len(a[0]):+a[0]:gamework.math'
,'.mean(a)},a.abs=Math.abs,a.normal=function(a){return a===0?0:a/gamework.math.abs(a)},a.bound=function(a,b,c){return Math.max(a,Math.min(c,b))},a.wrapint=function(a,b){return a=Math.floor(a),b=Math.floor(b),isFinite(a)&&isFinite(b)?(a>=0?a%=b:a=(b-Math.abs(a)%b)%b,a):NaN},a.identity=function(a){return a},a.curry=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);return function(){var c=Array.prototype.slice.call(arguments);return a.apply(this,b.concat(c))}},a.isnan=Math.isNaN,a.isnumber=function(a){return!Math.isNaN(a)},a.isfinite=Math.isFinite,a.isinfinite=function(a){return!Math.isFinite(a)},a.isodd=function(a){return a%2===1},a.iseven=function(a){return a%2===0},a.iszero=function(a){return a===0},a.isnonzero=function(a){return a!==0}},a.install(a)}(gamework.math),function(a,b){"use strict";var c=null,d=null,e=0,f=0,g={},h={};a.install=function(a){Object.defineProperties(a,{mousex:{get:function(){return e},enumerable:!0},mousey:{get:function(){return f},enumerable:!0}}),a.mousebutton=function('
,'a){return g[a]||0},a.keystate=function(a){}},b.inputHook=function(a,b){!d,d=b,window.onblur=function(){g={}},d.onmousemove=function(a){return typeof a=="undefined"&&(a=window.event),e=a.pageX-d.offsetWidth/2,f=-(a.pageY-d.offsetHeight/2),!1},d.onmousedown=function(a){return typeof a=="undefined"&&(a=window.event),g[a.which]=1,!1},d.onmouseup=function(a){return typeof a=="undefined"&&(a=window.event),g[a.which]=0,!1},d.oncontextmenu=function(){return!1}},a.install(a)}(gamework.input,gamework._),function(a){function c(a){var c,d=null;return b.hasOwnProperty(a)?d=b[a]:(d=new Audio,d.setAttribute("preload","preload"),gamework.game.startloadtask(),d.oncanplay=function(){gamework.game.endloadtask()},c=document.createElement("source"),c.setAttribute("src","game/"+a+".ogg"),c.setAttribute("type","audio/ogg"),d.appendChild(c),c=document.createElement("source"),c.setAttribute("src","game/"+a+".mp3"),c.setAttribute("type","audio/mp3"),d.appendChild(c),c=document.createElement("source"),c.setAttribute("src","game/"+a+".wav"'
,'),c.setAttribute("type","audio/wav"),d.appendChild(c),d.load(),b[a]=d,document.body.appendChild(d)),d}function d(a){var d;b.hasOwnProperty(a)?d=b[a]:d=c(a),d.cloneNode(!0).play()}var b={};a.install=function(a){a.loadsound=c,a.playsound=d},a.install(a)}(gamework.sound),gamework._.NAMED_COLORS={aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],cyan:[0,255,255],darkgoldenrod:[184,134,11],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20'
,",147],deepskyblue:[0,191,255],dimgray:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrod:[238,221,130],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslate:[132,112,255],lightslategray:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[176,48,96],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186"
,",85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumviolet:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[160,32,240],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140]"
,',thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],violetred:[208,32,144],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},function(a){function b(a,b){}"use strict",a.install=function(a){a.TileMap=b},a.install(a)}(gamework._),function(a){function b(a,b,c,d,e){var f=d/2*.5522848,g=e/2*.5522848,h=b+d,i=c+e,j=b+d/2,k=c+e/2;a.moveTo(b,k),a.bezierCurveTo(b,k-g,j-f,c,j,c),a.bezierCurveTo(j+f,c,h,k-g,h,k),a.bezierCurveTo(h,k+g,j+f,i,j,i),a.bezierCurveTo(j-f,i,b,k+g,b,k),a.closePath()}function c(a,b){this.name=a,this.layer=b,this.position={x:0,y:0},this.angle=0,this.size={x:40,y:40},this.pen={down:!1,color:gamework.graphics.color(0,0,0),cssColor:"rgb(0,0,0)",size:1},this.fill={color:gamework.graphics.color(1,1,1),cssColor:"rgb(255,255,255)"},this.scale={x:1,y:1,both:1},this.visible=!0,this.skin="arrow",this.image="",this.tile=0,this.userUpdateFunction=null,this.tileinfo={width:0,height:0},this.tile=0,this.data={}}"use strict"'
,',c.prototype.rename=function(b){var c;return b=a.validateId(b),c=b.toLowerCase(),b!==""&&!this.layer.sprites.hasOwnProperty(c)&&(delete this.layer.sprites[this.name.toLowerCase()],this.layer.sprites[c]=this,this.name=b),this.name},c.prototype.update=function(a){var b=this.layer.currentSprite;this.userUpdateFunction&&(this.layer.currentSprite=this,this.userUpdateFunction(),this.layer.currentSprite=b);if(this.visible){a.save(),a.translate(this.position.x,this.position.y),a.scale(this.scale.x,this.scale.y),a.rotate(-this.angle);switch(this.skin){case"arrow":this.drawArrowSprite(a);break;case"rectangle":this.drawRectangleSprite(a);break;case"square":this.drawSquareSprite(a);break;case"ellipse":this.drawEllipseSprite(a);break;case"circle":this.drawCircleSprite(a);break;case"pac-man":this.drawPacManSprite(a);break;case"ghost":this.drawGhostSprite(a);break;case"image":this.drawImageSprite(a)}a.restore()}},c.prototype.drawDebugInfo=function(a){var b=this.size.x*this.scale.x,c=this.size.y*this.scale.y,d=this.visible?1:.333'
,',e=gamework.graphics.color(this.fill.color.r,this.fill.color.g,this.fill.color.b,this.fill.color.a*d),f=gamework.graphics.color(this.pen.color.r,this.pen.color.g,this.pen.color.b,this.pen.color.a*d),g=this.pen.size*2;this.layer.currentSprite===this?a.strokeStyle="rgba(255, 0, 0, "+d+")":a.strokeStyle="rgba(0, 0, 255, "+d+")",a.save(),a.translate(this.position.x,this.position.y),a.beginPath(),a.moveTo(-5,0),a.lineTo(5,0),a.moveTo(0,-5),a.lineTo(0,5),a.stroke(),a.save(),a.rotate(-this.angle),a.lineWidth=1,a.strokeRect(-b/2,-c/2,b,c),a.restore(),a.fillStyle=a.strokeStyle,a.scale(1,-1),a.textBaseline="middle",a.font="12px sans-serif",a.fillText(this.name,b/2+3,0),a.translate(-b/2-3-g*1.5,0),a.fillStyle=e.tocss(),a.beginPath(),a.arc(0,0,g,0,Math.PI*2),a.fill(),a.strokeStyle=f.tocss(),a.lineWidth=this.pen.size,a.beginPath(),a.arc(0,0,g,0,Math.PI*2),a.stroke(),this.pen.down&&a.rotate(Math.PI),a.fillStyle="black",a.beginPath(),a.moveTo(0,-g*1.5-8),a.lineTo(3,-g*1.5-4),a.lineTo(-3,-g*1.5-4),a.fill(),a.restore()},c.prototype'
,'.drawArrowSprite=function(a){var b=Math.min(this.size.x,this.size.y);a.scale(b/36,b/36),a.strokeStyle="white",a.lineWidth=5,a.beginPath(),a.moveTo(10.405,-5.978),a.lineTo(0,12),a.lineTo(-10.405,-5.978),a.stroke(),a.strokeStyle="black",a.lineWidth=3,a.beginPath(),a.moveTo(10.405,-5.978),a.lineTo(0,12),a.lineTo(-10.405,-5.978),a.stroke(),a.strokeStyle="white",a.lineWidth=1,a.beginPath(),a.arc(0,0,3.5,0,Math.PI*2),a.stroke(),this.pen.down?(a.fillStyle=this.pen.cssColor,a.beginPath(),a.arc(0,0,3,0,Math.PI*2),a.fill()):(a.strokeStyle=this.pen.cssColor,a.beginPath(),a.arc(0,0,2.5,0,Math.PI*2),a.stroke())},c.prototype.drawImageSprite=function(b){var c;this.image&&(c=a.getImage(this.image),c.ready&&(b.save(),b.scale(1,-1),b.drawImage(c,-c.width/2,-c.height/2),b.restore()))},c.prototype.drawRectangleSprite=function(a){var b=this.size.x,c=this.size.y;a.fillStyle=this.fill.cssColor,a.fillRect(-b/2,-c/2,b,c),a.strokeStyle=this.pen.cssColor,a.lineWidth=this.pen.size,a.strokeRect(-b/2,-c/2,b,c)},c.prototype.drawSquareSprite='
,"function(a){var b=Math.min(this.size.x,this.size.y);a.fillStyle=this.fill.cssColor,a.fillRect(-b/2,-b/2,b,b),a.strokeStyle=this.pen.cssColor,a.lineWidth=this.pen.size,a.strokeRect(-b/2,-b/2,b,b)},c.prototype.drawEllipseSprite=function(a){a.fillStyle=this.fill.cssColor,a.beginPath(),b(a,-this.size.x/2,-this.size.y/2,this.size.x,this.size.y),a.fill(),a.strokeStyle=this.pen.cssColor,a.lineWidth=this.pen.size,a.beginPath(),b(a,-this.size.x/2,-this.size.y/2,this.size.x,this.size.y),a.stroke()},c.prototype.drawCircleSprite=function(a){var b=Math.min(this.size.x,this.size.y)/2;a.fillStyle=this.fill.cssColor,a.beginPath(),a.arc(0,0,b,0,Math.PI*2),a.fill(),a.strokeStyle=this.pen.cssColor,a.lineWidth=this.pen.size,a.beginPath(),a.arc(0,0,b,0,Math.PI*2),a.stroke()},c.prototype.drawPacManSprite=function(a){var b=Math.min(this.size.x,this.size.y)/2,c=.125*Math.max(0,1+Math.sin(+(new Date)/250*Math.PI));a.scale(1,-1),a.rotate(-Math.PI/2),a.fillStyle=this.fill.cssColor,a.beginPath(),a.moveTo(0,0),a.arc(0,0,b,Math.PI*c,Math.PI*"
,'(2-c)),a.lineTo(0,0),a.fill()},c.prototype.drawGhostSprite=function(a){var b=Math.min(this.size.x,this.size.y)/2,c=b/8,d=b/(this.tile==="scared"?5:3.5);a.scale(1,-1),a.rotate(-this.angle),a.fillStyle=this.fill.cssColor,a.beginPath(),a.arc(0,0,b,Math.PI,Math.PI*2),a.arc(b/3*2,b/3*2,b/3,0,Math.PI),a.arc(0,b/3*2,b/3,0,Math.PI),a.arc(-(b/3)*2,b/3*2,b/3,0,Math.PI),a.fill(),a.save(),a.fillStyle="white",a.translate(0,-b/6),a.rotate(this.angle),a.translate(0,-b/(this.tile==="scared"?20:6)),a.rotate(-this.angle),a.translate(-b/3,0),a.beginPath(),a.arc(0,0,d,0,Math.PI*2),a.arc(b/3*2,0,d,0,Math.PI*2),a.fill(),a.restore(),this.tile!=="scared"?(a.fillStyle=this.pen.cssColor,a.translate(0,-b/6),a.rotate(this.angle),a.translate(0,-b/3.5),a.rotate(-this.angle),a.translate(-b/3,0),a.beginPath(),a.arc(0,0,b/9,0,Math.PI*2),a.arc(b/3*2,0,b/9,0,Math.PI*2),a.fill()):(a.lineWidth=b/10,a.strokeStyle="white",a.translate(0,b/3),a.beginPath(),a.moveTo(-c*4,c),a.lineTo(-c*3,0),a.lineTo(-c*2,c),a.lineTo(-c*1,0),a.lineTo(0,c),a.lineTo(c*1,0'
,"),a.lineTo(c*2,c),a.lineTo(c*3,0),a.lineTo(c*4,c),a.stroke())},c.prototype.getPosition=function(){return this.position},c.prototype.setPosition=function(a,b){var c=gamework.math.vector(a,b);c!==null&&(this.position=c)},c.prototype.getX=function(){return this.position.x},c.prototype.getY=function(){return this.position.y},c.prototype.setX=function(a){var b=this.position;a=+a,!isNaN(a)&&isFinite(a)&&(this.position=gamework.math.vector(a,b.y))},c.prototype.setY=function(a){var b=this.position;a=+a,!isNaN(a)&&isFinite(a)&&(this.position=gamework.math.vector(b.x,a))},c.prototype.moveTo=function(a,b){var c=gamework.math.vector(a,b),d=this.layer.gfx.paper;c!==null&&(this.pen.down&&(d.strokeStyle=this.pen.cssColor,d.lineWidth=this.pen.size,d.beginPath(),d.moveTo(this.position.x,this.position.y),d.lineTo(c.x,c.y),d.stroke()),this.position=c)},c.prototype.moveBy=function(a,b){var c=gamework.math.vector(a,b);c!==null&&this.moveTo(this.position.x+c.x,this.position.y+c.y)},c.prototype.forward=function(a){a=+a,!isNaN(a)&&isFinite"
,'(a)&&this.moveBy(Math.sin(this.angle)*a,Math.cos(this.angle)*a)},c.prototype.back=function(a){this.forward(-a)},c.prototype.getAngle=function(){return gamework.math.fromrad(this.angle)},c.prototype.setAngle=function(a){a=+a,isNaN(a)||(this.angle=gamework.math.torad(a))},c.prototype.turnTo=function(a,b){var c;a=gamework.math.torad(+a),typeof b!="undefined"?b=gamework.math.torad(Math.abs(+b)):b=Infinity,!isNaN(a)&&!isNaN(b)&&(isFinite(b)?(c=a-this.angle,c<-Math.PI?c+=Math.PI*2:c>Math.PI&&(c-=Math.PI*2),c>=0?this.angle+=Math.min(Math.abs(c),b):this.angle-=Math.min(Math.abs(c),b)):this.angle=a)},c.prototype.lookAt=function(a,b,c){var d,e,f,g,h=Infinity;typeof a!="undefined"&&(typeof b!="undefined"?typeof c!="undefined"?(e=+a,f=+b,h=+c):!isNaN(a)&&!isNaN(b)?(e=+a,f=+b):(d=gamework.math.vector(a),e=d.x,f=d.y,h=+b):(d=gamework.math.vector(a),e=d.x,f=d.y)),isNaN(e)||isNaN(f)||isNaN(h)||(g=gamework.math.arctan2(e-this.position.x,f-this.position.y),this.turnTo(g,h))},c.prototype.lookAway=function(a,b,c){var d,e,f,g,h=Infinity'
,';typeof a!="undefined"&&(typeof b!="undefined"?typeof c!="undefined"?(e=+a,f=+b,h=+c):!isNaN(a)&&!isNaN(b)?(e=+a,f=+b):(d=gamework.math.vector(a),e=d.x,f=d.y,h=+b):(d=gamework.math.vector(a),e=d.x,f=d.y)),isNaN(e)||isNaN(f)||isNaN(h)||(g=gamework.math.arctan2(this.position.x-e,this.position.y-f),this.turnTo(g,h))},c.prototype.rotate=function(a){a=+a,isNaN(a)||(this.angle+=gamework.math.torad(a))},c.prototype.rotatecc=function(a){this.rotate(-a)},c.prototype.right=c.prototype.rotate,c.prototype.left=c.prototype.rotatecc,c.prototype.getSize=function(){return this.size},c.prototype.setSize=function(a,b){var c=vector(a,b);c!==null&&(this.size=c)},c.prototype.getWidth=function(){return this.size.x},c.prototype.setWidth=function(a){a=+a,isNaN(a)||(this.size=vector(a,this.size.y))},c.prototype.getHeight=function(){return this.size.y},c.prototype.setHeight=function(a){a=+a,isNaN(a)||(this.size=vector(this.size.x,a))},c.prototype.getSkin=function(){return this.skin},c.prototype.setSkin=function(a){a=a.toString().toLowerCase'
,'(),gamework.collections.contains(["arrow","circle","ellipse","square","rectangle","pac-man","ghost","image","tile"],a)&&(this.skin=a)},c.prototype.getImage=function(){return this.image},c.prototype.setImage=function(a){a+="",a&&(this.image=a)},c.prototype.getTile=function(){return this.tile},c.prototype.setTile=function(a){a+="",a&&(this.tile=a)},c.prototype.getUserUpdateFunction=function(){return this.userUpdateFunction},c.prototype.setUserUpdateFunction=function(a){a===null?this.userUpdateFunction=null:typeof a=="function"&&(this.userUpdateFunction=a)},c.prototype.getPenColor=function(){return this.pen.color},c.prototype.setPenColor=function(a,b,c,d){var e=gamework.graphics.color(a,b,c,d);e!==null&&(this.pen.color=e,this.pen.cssColor=e.tocss())},c.prototype.getFillColor=function(){return this.pen.color},c.prototype.setFillColor=function(a,b,c,d){var e=gamework.graphics.color(a,b,c,d);e!==null&&(this.fill.color=e,this.fill.cssColor=e.tocss())},c.prototype.getPenSize=function(){return this.pen.size},c.prototype'
,'.setPenSize=function(a){a=+a,!isNaN(a)&&isFinite(a)&&(this.pen.size=a)},c.prototype.isPenDown=function(){return this.pen.down},c.prototype.setPenDown=function(a){this.pen.down=!!a},c.prototype.penDown=function(){this.pen.down=!0},c.prototype.penUp=function(){this.pen.down=!1},c.prototype.isVisible=function(){return this.visible},c.prototype.setVisible=function(a){this.visible=!!a},c.prototype.show=function(){this.visible=!0},c.prototype.hide=function(){this.visible=!1},c.prototype.otherSpritesName=function(a){a=!!a},c.prototype.closestSpriteName=function(a){a=!!a},a.install=function(a){a.Sprite=c},a.install(a)}(gamework._),function(a,b,c){function d(a){a.setTransform(1,0,0,1,0,0)}function e(a){a.save(),d(a),a.clearRect(0,0,a.canvas.width,a.canvas.height),a.restore()}function f(a,b){this.name=a,this.screen=b,this.sprites={},this.currentSprite=null,this.nextSpriteId=0,this.els={container:document.createElement("div"),paper:document.createElement("canvas"),tiles:document.createElement("canvas"),sprites:document.createElement'
,'("canvas")},this.els.container.setAttribute("id","layer-"+a),this.els.container.setAttribute("class","gw-layer"),this.els.paper.setAttribute("class","gw-sublayer"),this.els.tiles.setAttribute("class","gw-sublayer"),this.els.sprites.setAttribute("class","gw-sublayer"),this.els.container.appendChild(this.els.paper),this.els.container.appendChild(this.els.tiles),this.els.container.appendChild(this.els.sprites),this.gfx={paper:this.els.paper.getContext("2d"),sprites:this.els.sprites.getContext("2d")},this.onResize(),this.newSprite("default"),this.sprites["default"].hide(),this.sprites["default"].penDown()}"use strict",f.prototype.getZ=function(){return this.z},f.prototype.setZ=function(a){var b,c=this.screen.getLayerCount()-1;isNaN(a)||(a=gamework.math.bound(0,+a,c),a!==this.z&&(b=this.screen.layers.order[a+1],this.screen.layers.order.splice(this.z,1),this.screen.els.page.removeChild(this.els.container),a===0?(this.screen.els.page.insertBefore(this.els.container,this.screen.els.page.firstChild),this.screen.layers.'
,'order.unshift(this)):a===c?(this.screen.els.page.appendChild(this.els.container),this.screen.layers.order.push(this)):(this.screen.els.page.insertBefore(this.els.container,b.els.container),this.screen.layers.order.splice(a,0,this)),this.screen.recalcLayersZ()))},f.prototype.rename=function(a){var b;return a=c.validateId(a),b=a.toLowerCase(),a!==""&&!this.screen.layers.lookup.hasOwnProperty(b)&&(delete this.screen.layers.lookup[this.name.toLowerCase()],this.screen.layers.lookup[b]=this,this.name=a,this.els.container.setAttribute("id","layer-"+a)),this.name},f.prototype.toBottom=function(){return this.setZ(0),this.z},f.prototype.moveDown=function(a){return isFinite(a)&&this.setZ(this.z- +a),this.z},f.prototype.moveUp=function(a){return isFinite(a)&&this.setZ(this.z+ +a),this.z},f.prototype.toTop=function(){return this.setZ(this.screen.getLayerCount()-1),this.z},f.prototype.update=function(){var a=this;e(a.gfx.sprites),gamework.collections.foreach(function(b){b.update(a.gfx.sprites)},a.sprites)},f.prototype.generateSpriteName='
,'function(){var a;do a="$"+this.nextSpriteId+"$",this.nextSpriteId+=1;while(this.sprites.hasOwnProperty(a));return a},f.prototype.newSprite=function(a){var d,e;return a||(a=this.generateSpriteName()),a=c.validateId(a),e=a.toLowerCase(),a!==""&&(this.sprites.hasOwnProperty(e)?a="":(d=new b(a,this),this.sprites[e]=d,this.currentSprite=d)),a},f.prototype.removeSprite=function(a){var b,d="";return typeof a=="undefined"&&(a=this.currentSprite.name),a=c.validateId(a).toLowerCase(),a!==""&&gamework.collections.len(this.sprites)>1&&this.sprites.hasOwnProperty(a)&&(b=this.sprites[a],delete this.sprites[a],this.currentSprite===b&&(this.currentSprite=gamework.collections.values(this.sprites)[0]),d=b.name),d},f.prototype.getCurrentSpriteName=function(){return this.currentSprite.name},f.prototype.setCurrentSpriteName=function(a){a=c.validateId(a).toLowerCase(),a!==""&&this.sprites.hasOwnProperty(a)&&(this.currentSprite=this.sprites[a])},f.prototype.onResize=function(){var a=this.screen.getSize();this.els.paper.setAttribute("width"'
,',a.x),this.els.paper.setAttribute("height",a.y),this.els.tiles.setAttribute("width",a.x),this.els.tiles.setAttribute("height",a.y),this.els.sprites.setAttribute("width",a.x),this.els.sprites.setAttribute("height",a.y),d(this.gfx.paper),this.gfx.paper.translate(Math.floor(a.x/2),Math.floor(a.y/2)),this.gfx.paper.scale(1,-1),this.gfx.sprites.setTransform(1,0,0,1,0,0),this.gfx.sprites.translate(Math.floor(a.x/2),Math.floor(a.y/2)),this.gfx.sprites.scale(1,-1)},f.prototype.getSpritesByName=function(){return gamework.collections.keys(this.sprites)},f.prototype.clear=function(){var a=this.gfx.paper;a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,a.canvas.width,a.canvas.height),a.restore()},a.install=function(a){a.Layer=f},a.install(a)}(gamework._,gamework._.Sprite,gamework._),function(a,b,c){function d(a){this.parent=null,this.config={size:gamework.math.vector(400,400),borderColor:gamework.graphics.color(.5,.5,.5),pageColor:gamework.graphics.color(.5,.5,.5)},this.layers={lookup:{},order:[],current:null},this.els='
,'{border:document.createElement("div"),page:document.createElement("div")},this.els.border.setAttribute("class","gw-screen"),this.els.page.setAttribute("class","gw-page"),this.els.border.appendChild(this.els.page),this.setBorderColor(this.config.borderColor),this.setPageColor(this.config.pageColor),this.setSize(this.config.size),a&&this.setParent(a),c.inputHook(null,this.els.border),this.newLayer("default")}"use strict",d.prototype.update=function(){var a=this;gamework.collections.foreach(function(a){a.update()},a.layers.order)},d.prototype.getParent=function(){return this.parent},d.prototype.setParent=function(a){this.parent&&this.parent.removeChild(this.els.border),a.appendChild(this.els.border),this.parent=a},d.prototype.getSize=function(){return this.config.size},d.prototype.setSize=function(a,b){var c=this,d=gamework.math.vector(a,b);d!==null&&(this.config.size=d,this.els.page.style.width=d.x+"px",this.els.page.style.height=d.y+"px",this.els.page.style.marginLeft=-d.x/2+"px",this.els.page.style.marginTop=-'
,'d.y/2+"px",gamework.collections.foreach(function(a){a.onResize()},c.layers.order))},d.prototype.getBorderColor=function(){return this.config.borderColor},d.prototype.setBorderColor=function(a,b,c,d){var e=gamework.graphics.color(a,b,c,d);e!==null&&(this.config.borderColor=e,this.els.border.style.background=e.tocss())},d.prototype.getPageColor=function(){return this.config.pageColor},d.prototype.setPageColor=function(a,b,c,d){var e=gamework.graphics.color(a,b,c,d);e!==null&&(this.config.pageColor=e,this.els.page.style.background=e.tocss())},d.prototype.recalcLayersZ=function(){var a;for(a=0;a<this.layers.order.length;a+=1)this.layers.order[a].z=a},d.prototype.newLayer=function(a,d){var e,f,g;if(typeof d=="undefined")d="above";else{d=d.trim().toLowerCase();if(d!=="above"&&d!=="below")return""}return a=c.validateId(a),g=a.toLowerCase(),a!==""&&(this.layers.lookup.hasOwnProperty(g)?a="":(f=new b(a,this),this.layers.lookup[g]=f,this.layers.current?d==="above"?(this.layers.current.els.container.nextSibling?this.els.'
,'page.insertBefore(f.els.container,this.layers.current.els.container.nextSibling):this.els.page.appendChild(f.els.container),this.layers.order.splice(this.layers.current.z+1,0,f)):(this.els.page.insertBefore(f.els.container,this.layers.current.els.container),this.layers.order.splice(this.layers.current.z,0,f)):(this.els.page.appendChild(f.els.container),this.layers.order.push(f)),this.layers.current=f,this.recalcLayersZ())),a},d.prototype.removeLayer=function(a){var b,d;return this.layers.order.length>1?(typeof a=="undefined"?a=this.layers.current.name:a=c.validateId(a),b=a.toLowerCase(),this.layers.lookup.hasOwnProperty(b)?(d=this.layers.lookup[b],delete this.layers.lookup[b],this.layers.order.splice(d.z,1),this.els.page.removeChild(d.els.container),this.recalcLayersZ(),this.layers.current===d&&(this.layers.current=this.layers.order[gamework.math.bound(0,d.z,this.layers.order.length-1)])):a=""):a="",a},d.prototype.getLayersByName=function(){var a=this;return map(function(a){return a.name},a.layers.order)},d.prototype'
,'.getCurrentLayer=function(){return this.layers.current},d.prototype.setCurrentLayer=function(a){gamework.collections.contains(this.layers.order,a)&&(this.layers.current=a)},d.prototype.setCurrentLayerByName=function(a){a=c.validateId(a).toLowerCase(),this.layers.lookup.hasOwnProperty(a)&&(this.layers.current=this.layers.lookup[a])},d.prototype.getLayerCount=function(){return this.layers.order.length},a.install=function(a){a.Screen=d},a.install(a)}(gamework._,gamework._.Layer,gamework._),function(a,b){function d(a){this.tiles=1}"use strict";var c={};a.install=function(a){a.newtileset=function(a,b,c,d,e,f){}},a.install(a)}(gamework.graphics,gamework._),function(a,b,c,d){function Color(a,b,c,d){this.r=a,this.g=b,this.b=c,this.a=d,Object.freeze(this)}function h(a,b,d,e){var f,g,h,i,j=null;if(typeof a!="undefined")if(typeof b!="undefined"&&typeof d!="undefined")f=+a,g=+b,h=+d,typeof e!="undefined"?i=+e:i=1;else switch(gamework.types.gettype(a)){case"string":a=a.trim(),c.hasOwnProperty(a.toLowerCase())?(f=c[a][0]/255'
,',g=c[a][1]/255,h=c[a][2]/255,i=1):a[0]==="#"&&(a.length===4?(f=parseInt(a[1],16)/15,g=parseInt(a[2],16)/15,h=parseInt(a[3],16)/15,i=1):a.length===5?(f=parseInt(a[1],16)/15,g=parseInt(a[2],16)/15,h=parseInt(a[3],16)/15,i=parseInt(a[4],16)/15):a.length===7?(f=parseInt(a[1]+a[2],16)/255,g=parseInt(a[3]+a[4],16)/255,h=parseInt(a[5]+a[6],16)/255,i=1):a.length===9&&(f=parseInt(a[1]+a[2],16)/255,g=parseInt(a[3]+a[4],16)/255,h=parseInt(a[5]+a[6],16)/255,i=parseInt(a[7]+a[8],16)/255));break;case"array":a.length===3?(f=+a[0],g=+a[1],h=+a[2],i=1):a.length===4&&(f=+a[0],g=+a[1],h=+a[2],i=+a[3]);break;case"object":f=+a.r,g=+a.g,h=+a.b,typeof a.a!="undefined"?i=+a.a:i=1}return isNaN(f)||isNaN(g)||isNaN(h)||isNaN(i)||f>=0&&f<=1&&g>=0&&g<=1&&h>=0&&h<=1&&i>=0&&i<=1&&(j=new Color(f,g,h,i)),j}"use strict";var e=0,f=null,g={};Color.prototype.toString=function(){return"color("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},Color.prototype.tocss=function(){return this.a!==1?"rgba("+Math.floor(this.r*255)+","+Math.floor(this.g*255)+","+'
,'Math.floor(this.b*255)+","+this.a+")":"rgb("+Math.floor(this.r*255)+","+Math.floor(this.g*255)+","+Math.floor(this.b*255)+")"},a.install=function(a){Object.defineProperties(a,{frames:{get:function(){return e},enumerable:!0},bordercolor:{get:function(){return f.getBorderColor()},set:function(a){f.setBorderColor(a)},enumerable:!0},pagecolor:{get:function(){return f.getPageColor()},set:function(a){f.setPageColor(a)},enumerable:!0},pagesize:{get:function(){return f.getSize()},set:function(a){f.setSize(a)},enumerable:!0},pagewidth:{get:function(){return f.getSize().x},set:function(a){var b=f.getSize(),c={x:a,y:b.y};f.setSize(c)},enumerable:!0},pageheight:{get:function(){return f.getSize().y},set:function(a){var b=f.getSize(),c={x:b.x,y:a};f.setSize(c)},enumerable:!0},spriteskin:{get:function(){return f.layers.current.currentSprite.getSkin()},set:function(a){f.layers.current.currentSprite.setSkin(a)},enumerable:!0},spriteimage:{get:function(){return f.layers.current.currentSprite.getImage()},set:function(a){f.layers'
,".current.currentSprite.setImage(a)},enumerable:!0},spritetile:{get:function(){return f.layers.current.currentSprite.getTile()},set:function(a){f.layers.current.currentSprite.setTile(a)},enumerable:!0},pencolor:{get:function(){return f.layers.current.currentSprite.getPenColor()},set:function(a){f.layers.current.currentSprite.setPenColor(a)},enumerable:!0},fillcolor:{get:function(){return f.layers.current.currentSprite.getFillColor()},set:function(a){f.layers.current.currentSprite.setFillColor(a)},enumerable:!0},pensize:{get:function(){return f.layers.current.currentSprite.getPenSize()},set:function(a){f.layers.current.currentSprite.setPenSize(a)},enumerable:!0},spriteupdate:{get:function(){return f.layers.current.currentSprite.getUserUpdateFunction()},set:function(a){f.layers.current.currentSprite.setUserUpdateFunction(a)},enumerable:!0},alllayers:{get:function(){return f.getLayersByName()},enumerable:!0},currentlayer:{get:function(){return f.getCurrentLayer().name},set:function(a){f.setCurrentLayerByName(a)},enumerable"
,":!0},layerz:{get:function(){return f.getCurrentLayer().getZ()},set:function(a){f.getCurrentLayer().setZ(a)},enumerable:!0},allsprites:{get:function(){return f.getCurrentLayer().getSpritesByName()},enumerable:!0},currentsprite:{get:function(){return f.layers.current.getCurrentSpriteName()},set:function(a){f.layers.current.setCurrentSpriteName(a)},enumerable:!0},spritewidth:{get:function(){return f.layers.current.currentSprite.getWidth()},set:function(a){return f.layers.current.currentSprite.setWidth(a)},enumerable:!0},spriteheight:{get:function(){return f.layers.current.currentSprite.getHeight()},set:function(a){return f.layers.current.currentSprite.setHeight(a)},enumerable:!0},spritex:{get:function(){return f.layers.current.currentSprite.getX()},set:function(a){return f.layers.current.currentSprite.setX(a)},enumerable:!0},spritey:{get:function(){return f.layers.current.currentSprite.getY()},set:function(a){return f.layers.current.currentSprite.setY(a)},enumerable:!0}}),a.newlayer=function(a,b){return f.newLayer"
,'(a,b)},a.removelayer=function(a){return f.removeLayer(a)},a.renamelayer=function(a,b){var c;return typeof b=="undefined"?f.getCurrentLayer().rename(a):(c=f.layers.lookup[d.validateId(a).toLowerCase()],c?c.rename(b):"")},a.layertotop=function(){return f.getCurrentLayer().toTop()},a.layerup=function(a){return f.getCurrentLayer().moveUp(a)},a.layerdown=function(a){return f.getCurrentLayer().moveDown(a)},a.layertobottom=function(){return f.getCurrentLayer().toBottom()},a.resize=function(a,b){f.setSize(a,b)},a.newsprite=function(a){return f.layers.current.newSprite(a)},a.removesprite=function(a){return f.getCurrentLayer().removeSprite(a)},a.renamesprite=function(a,b){var c;return typeof b=="undefined"?f.getCurrentLayer().currentSprite.rename(a):(c=f.getCurrentLayer().sprites[d.validateId(a).toLowerCase()],c?c.rename(b):"")},a.show=function(){f.layers.current.currentSprite.show()},a.hide=function(){f.layers.current.currentSprite.hide()},a.pendown=function(){f.layers.current.currentSprite.penDown()},a.penup=function('
,'){f.layers.current.currentSprite.penUp()},a.forward=function(a){f.layers.current.currentSprite.forward(a)},a.back=function(a){f.layers.current.currentSprite.back(a)},a.right=function(a){f.layers.current.currentSprite.right(a)},a.lookat=function(a,b,c){f.layers.current.currentSprite.lookAt(a,b,c)},a.lookaway=function(a,b,c){f.layers.current.currentSprite.lookAway(a,b,c)},a.left=function(a){f.layers.current.currentSprite.left(a)},a.moveto=function(a,b){f.layers.current.currentSprite.moveTo(a,b)},a.loadimage=function(a){d.loadImage(a)},a.home=function(){f.layers.current.currentSprite.setPosition(0,0),f.layers.current.currentSprite.setAngle(0)},a.clear=function(){f.layers.current.clear()},a.color=h},d.graphicsOnLoad=function(a){f===null&&(f=new b),f.setParent(a)},d.graphicsUpdate=function(){f&&f.update(),e+=1},d.loadImage=function(a){var b;g.hasOwnProperty(a)||(b=new Image,a+="",a&&(gamework.game.startloadtask(),b.onload=function(){g[a].ready=!0,gamework.game.endloadtask()},b.onerror=function(){gamework.game.endloadtask'
,'()},b.src="game/"+a,g[a]=b))},d.getImage=function(a){var b;return a+="",a&&(g.hasOwnProperty(a)||d.loadImage(a),b=g[a]),b},a.install(a)}(gamework.graphics,gamework._.Screen,gamework._.NAMED_COLORS,gamework._),function(a,b){function h(a,b){var c=document.createElement("script");c.onload=b,c.src=a,document.head.appendChild(c)}function i(){this.stack=[]}function j(a){this.running=!1,this.fps=30,this.interval=null,this.loopCallbacks=a,this.loadtasks=0}"use strict";var c,d,e,f=0,g=[];i.prototype.push=function(a){this.stack.push(a.toString()),this.init()},i.prototype.pop=function(){},i.prototype.set=function(){},i.prototype.init=function(){var a=this.stack[this.stack.length-1],b="init";a&&(b+="_"+a),typeof window[b]=="function"&&window[b]()},i.prototype.enter=function(){},i.prototype.update=function(){var a=this.stack[this.stack.length-1],b="update";a&&(b+="_"+a),typeof window[b]=="function"&&window[b]()},i.prototype.leave=function(){},i.prototype.term=function(){},i.prototype.change=function(a){this.stack.length===0?'
,'this.push(a):this.stack[this.stack.length-1]=a},j.prototype.setFps=function(a){a=+a,this.fps!==a&&a>0&&(this.fps=a,this.running&&(this.stop(),this.start()))},j.prototype.startloadtask=function(){this.loadtasks===0&&(c.style.display="block"),this.loadtasks+=1},j.prototype.endloadtask=function(){this.loadtasks=Math.max(0,this.loadtasks-1),this.loadtasks===0&&(c.style.display="none")},j.prototype.getFps=function(){return this.fps},j.prototype.start=function(){var a=this;this.running||(this.interval&&window.clearInterval(this.interval),this.interval=window.setInterval(function(){a.loadtasks===0&&foreach(function(a){a()},a.loopCallbacks)},1e3/this.fps),this.running=!0)},j.prototype.stop=function(){this.running&&(this.interval&&(window.clearInterval(this.interval),this.interval=null),this.running=!1)},a.install=function(a){Object.defineProperties(a,{title:{get:function(){return document.title},set:function(a){document.title=a}},fps:{get:function(){return e.getFps()},set:function(a){e.setFps(a)}}}),Object.defineProperties'
,'(a,{pushstate:{value:function(a){d.push(a)}},popstate:{value:function(){}},changestate:{value:function(a){d.change(a)}}}),Object.defineProperties(a,{startloadtask:{value:function(){e.startloadtask()}},endloadtask:{value:function(){e.endloadtask()}}}),a.start=function(){e.start()},a.stop=function(){e.stop()},a.__onloadhandler=function(a,f){return function(){b.graphicsOnLoad(document.body),a&&(gamework.types.install(window),gamework.string.install(window),gamework.collections.install(window),gamework.math.install(window),gamework.graphics.install(window),gamework.input.install(window),gamework.game.install(window),gamework.sound.install(window)),c=document.createElement("div"),c.innerHTML="Loading...",c.style.display="",c.setAttribute("class","gw-loading-overlay"),c.setAttribute("className","gw-loading-overlay"),document.body.appendChild(c),d=new i,e=new j([function(){d.update.call(d)},b.graphicsUpdate]),e.startloadtask(),e.start(),window.clearInterval(window.__titleAnimation__),gamework.game.title="Untitled Game"'
,",h(f,function(){e.endloadtask()})}}},a.install(a)}(gamework.game,gamework._),function(){gamework.validateid=gamework._.validateId,delete gamework._,Object.freeze(window.gamework),Object.freeze(window.gamework.game),Object.freeze(window.gamework.collections),Object.freeze(window.gamework.graphics),Object.freeze(window.gamework.input),Object.freeze(window.gamework.math),Object.freeze(window.gamework.music),Object.freeze(window.gamework.sound),Object.freeze(window.gamework.string),Object.freeze(window.gamework.types)}();","<\/script>"
].join("\n")),document.write("<script>(function(){window.onload=gamework.game.__onloadhandler(true,'game/main.js');}());<\/script>")):window.onload=function(){window.clearInterval(window.__titleAnimation__),document.title="Browser insufficiently modern",document.body.innerHTML='<div class="gw-error"><h1>Browser insufficiently modern</h1><p>The browser you are using to run this game does not support some of these required technologies:<ul><li><p>ECMAScript 5<ul><li>Object.defineProperties</li></ul><ul><li>Object.freeze</li></ul></p></li><li><p>HTML5<ul><li>canvas element and 2D drawing context</li></ul></p></li></ul></p><p>To run this game please upgrade your web browser.</p></div>'
}})();</script>
<style>html,body{padding:0;margin:0;width:100%;height:100%}.gw-screen{position:relative;overflow:hidden;width:100%;height:100%}.gw-page{position:absolute;left:50%;top:50%;overflow:hidden}.gw-layer{position:absolute;left:0;right:0;top:0;bottom:0}.gw-sublayer{display:block;padding:0;margin:0;position:absolute;top:0;left:0}.gw-loading-overlay{position:absolute;left:0;right:0;top:0;bottom:0}noscript.micro{padding:0;margin:0}.gw-error{padding:12px;margin:0}</style>
</head><body><noscript class="gw"><div class="gw-error"><h1>JavaScript disabled</h1><p>This game requires JavaScript to run. Either your browser dosn't support it, in which case you will need to upgrade to a more modern browser, or you have it disabled. Please enable JavaScript to run this game, thank you.</p></div></noscript></body></html>